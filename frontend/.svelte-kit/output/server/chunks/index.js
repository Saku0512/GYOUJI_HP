import{z as t,B as n,A as e}from"./utils2.js";const s=[];function u(t,n){return{subscribe:o(t,n).subscribe}}function o(e,u=t){let o=null;const r=new Set;function i(t){if(n(e,t)&&(e=t,o)){const t=!s.length;for(const n of r)n[1](),s.push(n,e);if(t){for(let t=0;t<s.length;t+=2)s[t][0](s[t+1]);s.length=0}}}function c(t){i(t(e))}return{set:i,update:c,subscribe:function(n,s=t){const f=[n,s];return r.add(f),1===r.size&&(o=u(i,c)||t),n(e),()=>{r.delete(f),0===r.size&&o&&(o(),o=null)}}}}function r(t){let n;return e(t,t=>n=t)(),n}export{r as g,u as r,o as w};
