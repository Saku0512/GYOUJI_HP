import{g as e,w as t,p as s,f as o,o as a,d as n,e as i,c as r,h as l,i as u,j as c,k as p,l as h,m as d,n as v,u as x,q as m}from"../../chunks/vendor.js";import"@sveltejs/kit/internal";import"../../chunks/exports.js";import"../../chunks/utils2.js";import"clsx";import"../../chunks/state.svelte.js";import{a as f}from"../../chunks/auth.js";import{E as w,u as g,a as b}from"../../chunks/api.js";import{p as y}from"../../chunks/auth-guard.js";/* empty css                                                      */import{A as $,R as k}from"../../chunks/AnimatedTransition.js";import{L as M}from"../../chunks/LoadingSpinner.js";const L=()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},S={subscribe:e=>L().page.subscribe(e)},T={subscribe:e=>L().navigating.subscribe(e)},z=t({isOnline:"undefined"==typeof navigator||navigator.onLine,connectionType:"unknown",effectiveType:"unknown",downlink:0,rtt:0,saveData:!1,lastOnlineTime:null,lastOfflineTime:null});const D=new class{constructor(){this.metrics=new Map,this.observers=[]}async measureTime(e,t){const s=performance.now();try{const o=await t(),a=performance.now()-s;return this.recordMetric(e,{type:"timing",duration:a,timestamp:Date.now()}),o}catch(o){const t=performance.now()-s;throw this.recordMetric(e,{type:"timing",duration:t,timestamp:Date.now(),error:o.message}),o}}recordMetric(e,t){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(t)}getBundleInfo(){if("undefined"==typeof window)return null;const e=Array.from(document.querySelectorAll("script[src]")),t=Array.from(document.querySelectorAll('link[rel="stylesheet"]'));return{scripts:e.map(e=>({src:e.src,async:e.async,defer:e.defer})),styles:t.map(e=>({href:e.href})),totalScripts:e.length,totalStyles:t.length}}measureWebVitals(){if("undefined"!=typeof window){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];this.recordMetric("LCP",{type:"web-vital",value:s.startTime,timestamp:Date.now()})});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e);const t=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("FID",{type:"web-vital",value:e.processingStart-e.startTime,timestamp:Date.now()})})});t.observe({entryTypes:["first-input"]}),this.observers.push(t);let s=0;const o=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(s+=e.value)}),this.recordMetric("CLS",{type:"web-vital",value:s,timestamp:Date.now()})});o.observe({entryTypes:["layout-shift"]}),this.observers.push(o)}if(window.performance&&window.performance.timing){const e=window.performance.timing,t=e.navigationStart;this.recordMetric("page-load",{type:"navigation",domContentLoaded:e.domContentLoadedEventEnd-t,loadComplete:e.loadEventEnd-t,firstPaint:e.responseStart-t,timestamp:Date.now()})}}}measureMemoryUsage(){if("undefined"==typeof window||!window.performance||!window.performance.memory)return null;const e=window.performance.memory,t={usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,timestamp:Date.now()};return this.recordMetric("memory-usage",{type:"memory",...t}),t}getAllMetrics(){const e={};for(const[t,s]of this.metrics)e[t]=s;return e}clearMetrics(){this.metrics.clear()}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}};function E(e,t){let n,v,x;s();let m,f,w,g=o(t.message,""),b=o(t.type,"info"),y=o(t.duration,5e3),$=o(t.dismissible,!0),k=o(t.isPaused,!1),M=o(t.showProgress,!0),L=o(t.actions,()=>[],!0),S=!0,T=y,z=100;function D(){m&&(clearTimeout(m),m=null),w&&(cancelAnimationFrame(w),w=null)}if(a(()=>{D()}),y>0&&(k?function(){if(m){clearTimeout(m),m=null;const e=Date.now()-f;T=Math.max(0,y-e)}w&&(cancelAnimationFrame(w),w=null)}():T>0&&!m&&(f=Date.now(),m=setTimeout(()=>{S=!1,D()},T),M&&function(){if(!M||y<=0)return;const e=()=>{if(!S||k)return;const t=Date.now()-f,s=Math.max(0,1-t/T);z=100*s,s>0&&(w=requestAnimationFrame(e))};w=requestAnimationFrame(e)}())),n="error"===b?"alert":"status",v="error"===b?"assertive":"polite",x={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"}[b]||"#6b7280",S){if(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div${l(`toast toast-${c(b)}`,"svelte-1b8horc",{paused:k})}${u("role",n)}${u("aria-live",v)} aria-atomic="true" tabindex="0"><div class="toast-content svelte-1b8horc"><div class="toast-icon svelte-1b8horc">`),"success"===b?(e.out.push("\x3c!--[--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>')):(e.out.push("\x3c!--[!--\x3e"),"error"===b?(e.out.push("\x3c!--[--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>')):(e.out.push("\x3c!--[!--\x3e"),"warning"===b?(e.out.push("\x3c!--[--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>')):(e.out.push("\x3c!--[!--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>')),e.out.push("\x3c!--]--\x3e")),e.out.push("\x3c!--]--\x3e")),e.out.push(`\x3c!--]--\x3e</div> <div class="toast-message svelte-1b8horc">${p(g)}</div> `),L&&L.length>0){e.out.push("\x3c!--[--\x3e");const t=h(L);e.out.push('<div class="toast-actions svelte-1b8horc">\x3c!--[--\x3e');for(let s=0,o=t.length;s<o;s++){let o=t[s];e.out.push(`<button${l(`toast-action toast-action-${c(o.variant||"primary")}`,"svelte-1b8horc")} type="button">${p(o.label)}</button>`)}e.out.push("\x3c!--]--\x3e</div>")}else e.out.push("\x3c!--[!--\x3e");e.out.push("\x3c!--]--\x3e "),$?(e.out.push("\x3c!--[--\x3e"),e.out.push('<button class="toast-close svelte-1b8horc" aria-label="通知を閉じる" type="button"><svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button>')):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div> "),M&&y>0?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div class="toast-progress svelte-1b8horc"><div class="toast-progress-bar svelte-1b8horc"${d(`width: ${c(z)}%; background-color: ${c(x)};`)}></div></div>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div>")}else e.out.push("\x3c!--[!--\x3e");e.out.push("\x3c!--]--\x3e"),i(t,{message:g,type:b,duration:y,dismissible:$,isPaused:k,showProgress:M,actions:L}),r()}function C(e,t){var n;let m,f;s();let w=o(t.position,"top-right"),y=o(t.maxNotifications,5),$=o(t.defaultDuration,5e3),k=o(t.pauseOnHover,!0),M=o(t.stackDirection,"down"),L=o(t.animationDuration,300),S=o(t.spacing,8),T=[],z=new Set;const D=g.subscribe(e=>{T=e.notifications.slice(-y)});if(a(()=>{D()}),T.forEach(e=>{e._autoRemovalSet||(e._autoRemovalSet=!0,function(e){if(0===e.duration)return;const t=e.duration||$;setTimeout(()=>{z.has(e.id)||b.removeNotification(e.id)},t)}(e))}),m=`position-${w}`,f=`stack-${M}`,T.length>0){e.out.push("\x3c!--[--\x3e");const t=h(T);e.out.push(`<div${l(`notification-container ${c(m)} ${c(f)}`,"svelte-bmueb8")}${d(`--spacing: ${c(S)}px; --animation-duration: ${c(L)}ms;`)} role="region" aria-label="通知" aria-live="polite">`),T.length>1?(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="notification-header svelte-bmueb8"><button class="clear-all-button svelte-bmueb8" aria-label="すべての通知をクリア" type="button"><svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> すべてクリア</button></div>')):e.out.push("\x3c!--[!--\x3e"),e.out.push('\x3c!--]--\x3e <div class="notifications-list svelte-bmueb8">\x3c!--[--\x3e');for(let s=0,o=t.length;s<o;s++){let o=t[s];e.out.push(`<div class="notification-wrapper svelte-bmueb8"${u("data-notification-id",o.id)}>`),E(e,{message:o.message,type:o.type,duration:0,dismissible:!0,isPaused:z.has(o.id)}),e.out.push("\x3c!----\x3e</div>")}e.out.push("\x3c!--]--\x3e</div> "),v(n??={},"$uiStore",g).notifications.length>y?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div class="notification-overflow svelte-bmueb8"><span class="overflow-text svelte-bmueb8">他に ${p(v(n??={},"$uiStore",g).notifications.length-y)} 件の通知があります</span> <button class="show-all-button svelte-bmueb8" type="button">すべて表示</button></div>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div>")}else e.out.push("\x3c!--[!--\x3e");e.out.push("\x3c!--]--\x3e"),n&&x(n),i(t,{position:w,maxNotifications:y,defaultDuration:$,pauseOnHover:k,stackDirection:M,animationDuration:L,spacing:S}),r()}function H(e,t){let n;s();let d=o(t.items,()=>[],!0),v=o(t.activeItem,""),x=o(t.brand,""),f=o(t.brandHref,"/"),w=o(t.mobileBreakpoint,768),g=o(t.className,""),b=!1,y=!1;function $(e){}function k(e){e.key,0}function M(){"undefined"!=typeof window&&(y=window.innerWidth<w)}a(()=>{"undefined"!=typeof window&&(window.removeEventListener("resize",M),document.removeEventListener("click",$),document.removeEventListener("keydown",k))}),n=["responsive-nav","",y?"nav-mobile":"nav-desktop",g].filter(Boolean).join(" ");const L=h(d);e.out.push(`<nav${l(m(n),"svelte-1oa544o")}>`),x?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div class="nav-brand svelte-1oa544o"><a${u("href",f)} class="brand-link svelte-1oa544o">${p(x)}</a></div>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e "),y?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<button${l("nav-toggle svelte-1oa544o",void 0,{active:b})}${u("aria-label",`メニューを${c("開く")}`)}${u("aria-expanded",b)}><span class="hamburger-line svelte-1oa544o"></span> <span class="hamburger-line svelte-1oa544o"></span> <span class="hamburger-line svelte-1oa544o"></span></button>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push(`\x3c!--]--\x3e <div${l("nav-menu svelte-1oa544o",void 0,{show:!y})}><ul class="nav-list svelte-1oa544o">\x3c!--[--\x3e`);for(let s=0,o=L.length;s<o;s++){let t=L[s];e.out.push('<li class="nav-item svelte-1oa544o">'),t.href?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<a${u("href",t.href)}${l("nav-link svelte-1oa544o",void 0,{active:v===t.key})}>`),t.icon?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<span class="nav-icon svelte-1oa544o">${p(t.icon)}</span>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push(`\x3c!--]--\x3e <span class="nav-text svelte-1oa544o">${p(t.label)}</span></a>`)):(e.out.push("\x3c!--[!--\x3e"),t.onClick?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<button${l("nav-button svelte-1oa544o",void 0,{active:v===t.key})}>`),t.icon?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<span class="nav-icon svelte-1oa544o">${p(t.icon)}</span>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push(`\x3c!--]--\x3e <span class="nav-text svelte-1oa544o">${p(t.label)}</span></button>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e")),e.out.push("\x3c!--]--\x3e</li>")}e.out.push("\x3c!--]--\x3e</ul></div> "),e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</nav>"),i(t,{items:d,activeItem:v,brand:x,brandHref:f,mobileBreakpoint:w,className:g}),r()}function j(e,t){var u;let p,h,d,m,L;var E;s(),a(()=>{D.disconnect()}),p=v(u??={},"$authStore",f),h=v(u??={},"$uiStore",g),d=v(u??={},"$networkStore",z),m=[{key:"home",label:"ホーム",href:"/",icon:"🏠"},...p.isAuthenticated?[{key:"admin",label:"管理ダッシュボード",href:"/admin",icon:"⚙️"},{key:"logout",label:"ログアウト",onClick:async function(){try{b.setLoading(!0),b.showNotification("ログアウト中...","info"),await y("/")}catch(e){b.showNotification("ログアウト処理でエラーが発生しました","error"),b.setLoading(!1)}},icon:"🚪"}]:[{key:"login",label:"管理者ログイン",href:"/login",icon:"🔑"}]],E=v(u??={},"$page",S).url.pathname,L="/"===E?"home":E.startsWith("/admin")?"admin":E.startsWith("/login")?"login":"",k(e,{children:e=>{e.out.push('<div class="app-layout svelte-1nuwwl7"><header class="header svelte-1nuwwl7">'),H(e,{brand:"トーナメント管理",brandHref:"/",items:m,activeItem:L,className:"main-navigation"}),e.out.push('\x3c!----\x3e</header> <main class="main-content svelte-1nuwwl7">'),function(e,t){s();let l=o(t.fallback,null),u=o(t.showRetry,!0),c=o(t.retryText,"再試行"),p=o(t.errorTitle,"エラーが発生しました"),h=o(t.errorMessage,""),d=o(t.level,()=>w.MEDIUM,!0),v=o(t.onError,null),x=o(t.onRetry,null),m=o(t.resetOnPropsChange,!0);a(()=>{}),e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!----\x3e"),n(e,t,"default",{}),e.out.push("\x3c!----\x3e"),e.out.push("\x3c!--]--\x3e"),i(t,{fallback:l,showRetry:u,retryText:c,errorTitle:p,errorMessage:h,level:d,onError:v,onRetry:x,resetOnPropsChange:m}),r()}(e,{errorTitle:"アプリケーションエラー",errorMessage:"アプリケーションでエラーが発生しました。ページを再読み込みするか、しばらく待ってから再試行してください。",showRetry:!0,retryText:"再読み込み",onRetry:()=>window.location.reload(),children:e=>{!function(e,t){var a;s();let u=o(t.transitionType,"fade"),p=o(t.duration,300),h=o(t.className,""),d=!1,m="",f=!0;v(a??={},"$navigating",T)?(d=!0,f=!1):d&&setTimeout(()=>{f=!0,d=!1},50),v(a??={},"$page",S).url.pathname!==m&&(m=v(a??={},"$page",S).url.pathname,d||(f=!0)),e.out.push(`<div${l(`page-transition-container ${c(h)}`,"svelte-z9eu0n")}>`),$(e,{show:f,type:u,duration:p,direction:"up",className:"page-content",children:e=>{e.out.push("\x3c!----\x3e"),n(e,t,"default",{}),e.out.push("\x3c!----\x3e")},$$slots:{default:!0}}),e.out.push("\x3c!----\x3e "),d?(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="loading-overlay svelte-z9eu0n"><div class="loading-spinner svelte-z9eu0n"></div></div>')):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div>"),a&&x(a),i(t,{transitionType:u,duration:p,className:h}),r()}(e,{transitionType:"fade",duration:300,children:e=>{e.out.push("\x3c!----\x3e"),n(e,t,"default",{}),e.out.push("\x3c!----\x3e")},$$slots:{default:!0}})},$$slots:{default:!0}}),e.out.push('\x3c!----\x3e</main> <footer class="footer svelte-1nuwwl7">'),k(e,{container:!0,padding:!0,children:e=>{e.out.push('<div class="footer-content svelte-1nuwwl7"><div class="footer-section svelte-1nuwwl7"><h3 class="footer-title svelte-1nuwwl7">トーナメント管理システム</h3> <p class="footer-description svelte-1nuwwl7">バレーボール、卓球、8人制サッカーのトーナメント管理</p></div> <div class="footer-section svelte-1nuwwl7"><h4 class="footer-subtitle svelte-1nuwwl7">リンク</h4> <ul class="footer-links svelte-1nuwwl7"><li class="svelte-1nuwwl7"><a href="/" class="svelte-1nuwwl7">ホーム</a></li> '),p.isAuthenticated?(e.out.push("\x3c!--[--\x3e"),e.out.push('<li class="svelte-1nuwwl7"><a href="/admin" class="svelte-1nuwwl7">管理ダッシュボード</a></li>')):(e.out.push("\x3c!--[!--\x3e"),e.out.push('<li class="svelte-1nuwwl7"><a href="/login" class="svelte-1nuwwl7">管理者ログイン</a></li>')),e.out.push('\x3c!--]--\x3e</ul></div></div> <div class="footer-bottom svelte-1nuwwl7"><p class="svelte-1nuwwl7">© 2024 トーナメント管理システム. All rights reserved.</p></div>')},$$slots:{default:!0}}),e.out.push("\x3c!----\x3e</footer> "),h.loading||p.loading?(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="loading-overlay svelte-1nuwwl7"><div class="loading-content svelte-1nuwwl7">'),M(e,{size:"large"}),e.out.push('\x3c!----\x3e <p class="loading-text svelte-1nuwwl7">処理中...</p></div></div>')):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e "),d.isOnline?e.out.push("\x3c!--[!--\x3e"):(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="network-status offline svelte-1nuwwl7" role="alert" aria-live="polite"><div class="network-status-content svelte-1nuwwl7"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" class="network-icon svelte-1nuwwl7"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" class="svelte-1nuwwl7"></path><path d="M3 16l14-14" stroke="currentColor" stroke-width="2" class="svelte-1nuwwl7"></path></svg> <span class="svelte-1nuwwl7">オフライン - 接続が復旧したら自動的に同期されます</span></div></div>')),e.out.push("\x3c!--]--\x3e "),C(e,{position:"top-right",maxNotifications:5,defaultDuration:5e3,pauseOnHover:!0,stackDirection:"down"}),e.out.push("\x3c!----\x3e</div>")},$$slots:{default:!0}}),u&&x(u),r()}export{j as default};
