import{g as e,p as t,b as s,c as o,a,d as n,e as i,f as r,h as l,j as u,k as c,l as p,u as h,m as d}from"../../chunks/index2.js";import{o as v,A as x,R as m}from"../../chunks/AnimatedTransition.js";import"@sveltejs/kit/internal";import"../../chunks/exports.js";import"../../chunks/utils.js";import"clsx";import"../../chunks/state.svelte.js";import{a as f}from"../../chunks/auth.js";import{E as w,u as b,a as g}from"../../chunks/client.js";import{p as y}from"../../chunks/auth-guard.js";import{w as $}from"../../chunks/index.js";import{y as k}from"../../chunks/utils2.js";/* empty css                                                      */import{L as M}from"../../chunks/LoadingSpinner.js";const L=()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},S={subscribe:e=>L().page.subscribe(e)},T={subscribe:e=>L().navigating.subscribe(e)},z=$({isOnline:"undefined"==typeof navigator||navigator.onLine,connectionType:"unknown",effectiveType:"unknown",downlink:0,rtt:0,saveData:!1,lastOnlineTime:null,lastOfflineTime:null});const D=new class{constructor(){this.metrics=new Map,this.observers=[]}async measureTime(e,t){const s=performance.now();try{const o=await t(),a=performance.now()-s;return this.recordMetric(e,{type:"timing",duration:a,timestamp:Date.now()}),o}catch(o){const t=performance.now()-s;throw this.recordMetric(e,{type:"timing",duration:t,timestamp:Date.now(),error:o.message}),o}}recordMetric(e,t){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(t)}getBundleInfo(){if("undefined"==typeof window)return null;const e=Array.from(document.querySelectorAll("script[src]")),t=Array.from(document.querySelectorAll('link[rel="stylesheet"]'));return{scripts:e.map(e=>({src:e.src,async:e.async,defer:e.defer})),styles:t.map(e=>({href:e.href})),totalScripts:e.length,totalStyles:t.length}}measureWebVitals(){if("undefined"!=typeof window){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];this.recordMetric("LCP",{type:"web-vital",value:s.startTime,timestamp:Date.now()})});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e);const t=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("FID",{type:"web-vital",value:e.processingStart-e.startTime,timestamp:Date.now()})})});t.observe({entryTypes:["first-input"]}),this.observers.push(t);let s=0;const o=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(s+=e.value)}),this.recordMetric("CLS",{type:"web-vital",value:s,timestamp:Date.now()})});o.observe({entryTypes:["layout-shift"]}),this.observers.push(o)}if(window.performance&&window.performance.timing){const e=window.performance.timing,t=e.navigationStart;this.recordMetric("page-load",{type:"navigation",domContentLoaded:e.domContentLoadedEventEnd-t,loadComplete:e.loadEventEnd-t,firstPaint:e.responseStart-t,timestamp:Date.now()})}}}measureMemoryUsage(){if("undefined"==typeof window||!window.performance||!window.performance.memory)return null;const e=window.performance.memory,t={usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,timestamp:Date.now()};return this.recordMetric("memory-usage",{type:"memory",...t}),t}getAllMetrics(){const e={};for(const[t,s]of this.metrics)e[t]=s;return e}clearMetrics(){this.metrics.clear()}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}};function E(e,s){let p,h,d;t();let x,m,f,w=k(s.message,""),b=k(s.type,"info"),g=k(s.duration,5e3),y=k(s.dismissible,!0),$=k(s.isPaused,!1),M=k(s.showProgress,!0),L=k(s.actions,()=>[],!0),S=!0,T=g,z=100;function D(){x&&(clearTimeout(x),x=null),f&&(cancelAnimationFrame(f),f=null)}if(v(()=>{D()}),g>0&&($?function(){if(x){clearTimeout(x),x=null;const e=Date.now()-m;T=Math.max(0,g-e)}f&&(cancelAnimationFrame(f),f=null)}():T>0&&!x&&(m=Date.now(),x=setTimeout(()=>{S=!1,D()},T),M&&function(){if(!M||g<=0)return;const e=()=>{if(!S||$)return;const t=Date.now()-m,s=Math.max(0,1-t/T);z=100*s,s>0&&(f=requestAnimationFrame(e))};f=requestAnimationFrame(e)}())),p="error"===b?"alert":"status",h="error"===b?"assertive":"polite",d={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"}[b]||"#6b7280",S){if(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div${n(`toast toast-${r(b)}`,"svelte-1b8horc",{paused:$})}${i("role",p)}${i("aria-live",h)} aria-atomic="true" tabindex="0"><div class="toast-content svelte-1b8horc"><div class="toast-icon svelte-1b8horc">`),"success"===b?(e.out.push("\x3c!--[--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>')):(e.out.push("\x3c!--[!--\x3e"),"error"===b?(e.out.push("\x3c!--[--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>')):(e.out.push("\x3c!--[!--\x3e"),"warning"===b?(e.out.push("\x3c!--[--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>')):(e.out.push("\x3c!--[!--\x3e"),e.out.push('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>')),e.out.push("\x3c!--]--\x3e")),e.out.push("\x3c!--]--\x3e")),e.out.push(`\x3c!--]--\x3e</div> <div class="toast-message svelte-1b8horc">${l(w)}</div> `),L&&L.length>0){e.out.push("\x3c!--[--\x3e");const t=u(L);e.out.push('<div class="toast-actions svelte-1b8horc">\x3c!--[--\x3e');for(let s=0,o=t.length;s<o;s++){let o=t[s];e.out.push(`<button${n(`toast-action toast-action-${r(o.variant||"primary")}`,"svelte-1b8horc")} type="button">${l(o.label)}</button>`)}e.out.push("\x3c!--]--\x3e</div>")}else e.out.push("\x3c!--[!--\x3e");e.out.push("\x3c!--]--\x3e "),y?(e.out.push("\x3c!--[--\x3e"),e.out.push('<button class="toast-close svelte-1b8horc" aria-label="通知を閉じる" type="button"><svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button>')):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div> "),M&&g>0?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div class="toast-progress svelte-1b8horc"><div class="toast-progress-bar svelte-1b8horc"${c(`width: ${r(z)}%; background-color: ${r(d)};`)}></div></div>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div>")}else e.out.push("\x3c!--[!--\x3e");e.out.push("\x3c!--]--\x3e"),o(s,{message:w,type:b,duration:g,dismissible:y,isPaused:$,showProgress:M,actions:L}),a()}function j(e,s){var d;let x,m;t();let f=k(s.position,"top-right"),w=k(s.maxNotifications,5),y=k(s.defaultDuration,5e3),$=k(s.pauseOnHover,!0),M=k(s.stackDirection,"down"),L=k(s.animationDuration,300),S=k(s.spacing,8),T=[],z=new Set;const D=b.subscribe(e=>{T=e.notifications.slice(-w)});if(v(()=>{D()}),T.forEach(e=>{e._autoRemovalSet||(e._autoRemovalSet=!0,function(e){if(0===e.duration)return;const t=e.duration||y;setTimeout(()=>{z.has(e.id)||g.removeNotification(e.id)},t)}(e))}),x=`position-${f}`,m=`stack-${M}`,T.length>0){e.out.push("\x3c!--[--\x3e");const t=u(T);e.out.push(`<div${n(`notification-container ${r(x)} ${r(m)}`,"svelte-bmueb8")}${c(`--spacing: ${r(S)}px; --animation-duration: ${r(L)}ms;`)} role="region" aria-label="通知" aria-live="polite">`),T.length>1?(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="notification-header svelte-bmueb8"><button class="clear-all-button svelte-bmueb8" aria-label="すべての通知をクリア" type="button"><svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> すべてクリア</button></div>')):e.out.push("\x3c!--[!--\x3e"),e.out.push('\x3c!--]--\x3e <div class="notifications-list svelte-bmueb8">\x3c!--[--\x3e');for(let s=0,o=t.length;s<o;s++){let o=t[s];e.out.push(`<div class="notification-wrapper svelte-bmueb8"${i("data-notification-id",o.id)}>`),E(e,{message:o.message,type:o.type,duration:0,dismissible:!0,isPaused:z.has(o.id)}),e.out.push("\x3c!----\x3e</div>")}e.out.push("\x3c!--]--\x3e</div> "),p(d??={},"$uiStore",b).notifications.length>w?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div class="notification-overflow svelte-bmueb8"><span class="overflow-text svelte-bmueb8">他に ${l(p(d??={},"$uiStore",b).notifications.length-w)} 件の通知があります</span> <button class="show-all-button svelte-bmueb8" type="button">すべて表示</button></div>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div>")}else e.out.push("\x3c!--[!--\x3e");e.out.push("\x3c!--]--\x3e"),d&&h(d),o(s,{position:f,maxNotifications:w,defaultDuration:y,pauseOnHover:$,stackDirection:M,animationDuration:L,spacing:S}),a()}function C(e,s){let c;t();let p=k(s.items,()=>[],!0),h=k(s.activeItem,""),x=k(s.brand,""),m=k(s.brandHref,"/"),f=k(s.mobileBreakpoint,768),w=k(s.className,""),b=!1,g=!1;function y(e){}function $(e){e.key,0}function M(){"undefined"!=typeof window&&(g=window.innerWidth<f)}v(()=>{"undefined"!=typeof window&&(window.removeEventListener("resize",M),document.removeEventListener("click",y),document.removeEventListener("keydown",$))}),c=["responsive-nav","",g?"nav-mobile":"nav-desktop",w].filter(Boolean).join(" ");const L=u(p);e.out.push(`<nav${n(d(c),"svelte-1oa544o")}>`),x?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<div class="nav-brand svelte-1oa544o"><a${i("href",m)} class="brand-link svelte-1oa544o">${l(x)}</a></div>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e "),g?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<button${n("nav-toggle svelte-1oa544o",void 0,{active:b})}${i("aria-label",`メニューを${r("開く")}`)}${i("aria-expanded",b)}><span class="hamburger-line svelte-1oa544o"></span> <span class="hamburger-line svelte-1oa544o"></span> <span class="hamburger-line svelte-1oa544o"></span></button>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push(`\x3c!--]--\x3e <div${n("nav-menu svelte-1oa544o",void 0,{show:!g})}><ul class="nav-list svelte-1oa544o">\x3c!--[--\x3e`);for(let t=0,o=L.length;t<o;t++){let s=L[t];e.out.push('<li class="nav-item svelte-1oa544o">'),s.href?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<a${i("href",s.href)}${n("nav-link svelte-1oa544o",void 0,{active:h===s.key})}>`),s.icon?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<span class="nav-icon svelte-1oa544o">${l(s.icon)}</span>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push(`\x3c!--]--\x3e <span class="nav-text svelte-1oa544o">${l(s.label)}</span></a>`)):(e.out.push("\x3c!--[!--\x3e"),s.onClick?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<button${n("nav-button svelte-1oa544o",void 0,{active:h===s.key})}>`),s.icon?(e.out.push("\x3c!--[--\x3e"),e.out.push(`<span class="nav-icon svelte-1oa544o">${l(s.icon)}</span>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push(`\x3c!--]--\x3e <span class="nav-text svelte-1oa544o">${l(s.label)}</span></button>`)):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e")),e.out.push("\x3c!--]--\x3e</li>")}e.out.push("\x3c!--]--\x3e</ul></div> "),e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</nav>"),o(s,{items:p,activeItem:h,brand:x,brandHref:m,mobileBreakpoint:f,className:w}),a()}function H(e,i){var l;let u,c,d,$,L;var E;t(),v(()=>{D.disconnect()}),u=p(l??={},"$authStore",f),c=p(l??={},"$uiStore",b),d=p(l??={},"$networkStore",z),$=[{key:"home",label:"ホーム",href:"/",icon:"🏠"},...u.isAuthenticated?[{key:"admin",label:"管理ダッシュボード",href:"/admin",icon:"⚙️"},{key:"logout",label:"ログアウト",onClick:async function(){try{g.setLoading(!0),g.showNotification("ログアウト中...","info"),await y("/")}catch(e){g.showNotification("ログアウト処理でエラーが発生しました","error"),g.setLoading(!1)}},icon:"🚪"}]:[{key:"login",label:"管理者ログイン",href:"/login",icon:"🔑"}]],E=p(l??={},"$page",S).url.pathname,L="/"===E?"home":E.startsWith("/admin")?"admin":E.startsWith("/login")?"login":"",m(e,{children:e=>{e.out.push('<div class="app-layout svelte-1nuwwl7"><header class="header svelte-1nuwwl7">'),C(e,{brand:"トーナメント管理",brandHref:"/",items:$,activeItem:L,className:"main-navigation"}),e.out.push('\x3c!----\x3e</header> <main class="main-content svelte-1nuwwl7">'),function(e,n){t();let i=k(n.fallback,null),r=k(n.showRetry,!0),l=k(n.retryText,"再試行"),u=k(n.errorTitle,"エラーが発生しました"),c=k(n.errorMessage,""),p=k(n.level,()=>w.MEDIUM,!0),h=k(n.onError,null),d=k(n.onRetry,null),x=k(n.resetOnPropsChange,!0);v(()=>{}),e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!----\x3e"),s(e,n,"default",{}),e.out.push("\x3c!----\x3e"),e.out.push("\x3c!--]--\x3e"),o(n,{fallback:i,showRetry:r,retryText:l,errorTitle:u,errorMessage:c,level:p,onError:h,onRetry:d,resetOnPropsChange:x}),a()}(e,{errorTitle:"アプリケーションエラー",errorMessage:"アプリケーションでエラーが発生しました。ページを再読み込みするか、しばらく待ってから再試行してください。",showRetry:!0,retryText:"再読み込み",onRetry:()=>window.location.reload(),children:e=>{!function(e,i){var l;t();let u=k(i.transitionType,"fade"),c=k(i.duration,300),d=k(i.className,""),v=!1,m="",f=!0;p(l??={},"$navigating",T)?(v=!0,f=!1):v&&setTimeout(()=>{f=!0,v=!1},50),p(l??={},"$page",S).url.pathname!==m&&(m=p(l??={},"$page",S).url.pathname,v||(f=!0)),e.out.push(`<div${n(`page-transition-container ${r(d)}`,"svelte-z9eu0n")}>`),x(e,{show:f,type:u,duration:c,direction:"up",className:"page-content",children:e=>{e.out.push("\x3c!----\x3e"),s(e,i,"default",{}),e.out.push("\x3c!----\x3e")},$$slots:{default:!0}}),e.out.push("\x3c!----\x3e "),v?(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="loading-overlay svelte-z9eu0n"><div class="loading-spinner svelte-z9eu0n"></div></div>')):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e</div>"),l&&h(l),o(i,{transitionType:u,duration:c,className:d}),a()}(e,{transitionType:"fade",duration:300,children:e=>{e.out.push("\x3c!----\x3e"),s(e,i,"default",{}),e.out.push("\x3c!----\x3e")},$$slots:{default:!0}})},$$slots:{default:!0}}),e.out.push('\x3c!----\x3e</main> <footer class="footer svelte-1nuwwl7">'),m(e,{container:!0,padding:!0,children:e=>{e.out.push('<div class="footer-content svelte-1nuwwl7"><div class="footer-section svelte-1nuwwl7"><h3 class="footer-title svelte-1nuwwl7">トーナメント管理システム</h3> <p class="footer-description svelte-1nuwwl7">バレーボール、卓球、8人制サッカーのトーナメント管理</p></div> <div class="footer-section svelte-1nuwwl7"><h4 class="footer-subtitle svelte-1nuwwl7">リンク</h4> <ul class="footer-links svelte-1nuwwl7"><li class="svelte-1nuwwl7"><a href="/" class="svelte-1nuwwl7">ホーム</a></li> '),u.isAuthenticated?(e.out.push("\x3c!--[--\x3e"),e.out.push('<li class="svelte-1nuwwl7"><a href="/admin" class="svelte-1nuwwl7">管理ダッシュボード</a></li>')):(e.out.push("\x3c!--[!--\x3e"),e.out.push('<li class="svelte-1nuwwl7"><a href="/login" class="svelte-1nuwwl7">管理者ログイン</a></li>')),e.out.push('\x3c!--]--\x3e</ul></div></div> <div class="footer-bottom svelte-1nuwwl7"><p class="svelte-1nuwwl7">© 2024 トーナメント管理システム. All rights reserved.</p></div>')},$$slots:{default:!0}}),e.out.push("\x3c!----\x3e</footer> "),c.loading||u.loading?(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="loading-overlay svelte-1nuwwl7"><div class="loading-content svelte-1nuwwl7">'),M(e,{size:"large"}),e.out.push('\x3c!----\x3e <p class="loading-text svelte-1nuwwl7">処理中...</p></div></div>')):e.out.push("\x3c!--[!--\x3e"),e.out.push("\x3c!--]--\x3e "),d.isOnline?e.out.push("\x3c!--[!--\x3e"):(e.out.push("\x3c!--[--\x3e"),e.out.push('<div class="network-status offline svelte-1nuwwl7" role="alert" aria-live="polite"><div class="network-status-content svelte-1nuwwl7"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" class="network-icon svelte-1nuwwl7"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" class="svelte-1nuwwl7"></path><path d="M3 16l14-14" stroke="currentColor" stroke-width="2" class="svelte-1nuwwl7"></path></svg> <span class="svelte-1nuwwl7">オフライン - 接続が復旧したら自動的に同期されます</span></div></div>')),e.out.push("\x3c!--]--\x3e "),j(e,{position:"top-right",maxNotifications:5,defaultDuration:5e3,pauseOnHover:!0,stackDirection:"down"}),e.out.push("\x3c!----\x3e</div>")},$$slots:{default:!0}}),l&&h(l),a()}export{H as default};
