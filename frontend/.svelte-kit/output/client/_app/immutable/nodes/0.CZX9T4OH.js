import"../chunks/DsnmJJEf.js";import{i as Le}from"../chunks/B1pWaKUj.js";import{a1 as Me,aB as De,A as F,y as q,aC as de,a3 as J,C as a,a5 as l,a6 as xe,a2 as _,a7 as i,a8 as s,a9 as r,a4 as A,aa as He,aD as se,ae as x,ac as Fe,aE as we,aF as Ge,aG as Ie,u as y,ah as ye}from"../chunks/CuY-H75l.js";import{i as h}from"../chunks/DWiXyezG.js";import{e as Ke,L as Oe}from"../chunks/CdAJyZzl.js";import{s as Pe}from"../chunks/D43VgZms.js";import{s as g,u as S,b as Ve,e as je}from"../chunks/CzS31Zl-.js";import{p as te,s as qe,a as ue}from"../chunks/BKXpaS3L.js";import{s as Je,g as Qe}from"../chunks/CRuF0lUP.js";import{a as fe}from"../chunks/DnIs1vw8.js";import{b as Re}from"../chunks/IxeuUGQt.js";const Ue=()=>{const m=Je;return{page:{subscribe:m.page.subscribe},navigating:{subscribe:m.navigating.subscribe},updated:m.updated}},We={subscribe(m){return Ue().page.subscribe(m)}};var Xe=se('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Ye=se('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>'),Ze=se('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),$e=se('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>'),ea=_('<button class="toast-close svelte-trunga" aria-label="通知を閉じる" type="button"><svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button>'),aa=_('<div role="alert" aria-live="polite" aria-atomic="true"><div class="toast-content svelte-trunga"><div class="toast-icon svelte-trunga"><!></div> <div class="toast-message svelte-trunga"> </div> <!></div></div>');function ta(m,b){Me(b,!1);let G=te(b,"message",8,""),B=te(b,"type",8,"info"),I=te(b,"duration",8,5e3),Q=te(b,"dismissible",8,!0);const ie=De();let o=q(!0),k;I()>0&&(k=setTimeout(()=>{n()},I()));function n(){F(o,!1),k&&clearTimeout(k),ie("close")}let K=q();Le();var R=de(),z=J(R);{var re=O=>{var d=aa(),N=i(d),C=i(N),P=i(C);{var U=v=>{var u=Xe();l(v,u)},V=v=>{var u=de(),X=J(u);{var Y=w=>{var T=Ye();l(w,T)},Z=w=>{var T=de(),$=J(T);{var ve=p=>{var j=Ze();l(p,j)},ne=p=>{var j=$e();l(p,j)};h($,p=>{B()==="warning"?p(ve):p(ne,!1)},!0)}l(w,T)};h(X,w=>{B()==="error"?w(Y):w(Z,!1)},!0)}l(v,u)};h(P,v=>{B()==="success"?v(U):v(V,!1)})}s(C);var E=r(C,2),W=i(E,!0);s(E);var le=r(E,2);{var oe=v=>{var u=ea();x("click",u,n),l(v,u)};h(le,v=>{Q()&&v(oe)})}s(N),s(d),Re(d,v=>F(K,v),()=>a(K)),A(()=>{g(d,1,`toast toast-${B()??""}`,"svelte-trunga"),He(W,G())}),l(O,d)};h(z,O=>{a(o)&&O(re)})}l(m,R),xe()}var sa=_('<a href="/admin">管理ダッシュボード</a> <button class="nav-button logout-button svelte-ikcr39">ログアウト</button>',1),ia=_('<a href="/login">管理者ログイン</a>'),ra=_('<a href="/admin">管理ダッシュボード</a> <button class="mobile-nav-button logout-button svelte-ikcr39">ログアウト</button>',1),la=_('<a href="/login">管理者ログイン</a>'),oa=_('<div><div class="mobile-nav-content svelte-ikcr39"><a href="/">ホーム</a> <!></div></div>'),va=_('<li class="svelte-ikcr39"><a href="/admin" class="svelte-ikcr39">管理ダッシュボード</a></li>'),na=_('<li class="svelte-ikcr39"><a href="/login" class="svelte-ikcr39">管理者ログイン</a></li>'),ca=_('<div class="loading-overlay svelte-ikcr39"><div class="loading-content svelte-ikcr39"><!> <p class="loading-text svelte-ikcr39">処理中...</p></div></div>'),da=_('<div class="app-layout svelte-ikcr39"><header class="header svelte-ikcr39"><div class="container"><nav class="navbar svelte-ikcr39"><div class="navbar-brand svelte-ikcr39"><a href="/" class="brand-link svelte-ikcr39"><h1 class="brand-title svelte-ikcr39">トーナメント管理</h1></a></div> <div class="navbar-nav desktop-nav svelte-ikcr39"><a href="/">ホーム</a> <!></div> <button class="mobile-menu-button svelte-ikcr39" aria-label="メニューを開く"><span></span> <span></span> <span></span></button></nav></div> <!></header> <main class="main-content svelte-ikcr39"><!></main> <footer class="footer svelte-ikcr39"><div class="container"><div class="footer-content svelte-ikcr39"><div class="footer-section svelte-ikcr39"><h3 class="footer-title svelte-ikcr39">トーナメント管理システム</h3> <p class="footer-description svelte-ikcr39">バレーボール、卓球、8人制サッカーのトーナメント管理</p></div> <div class="footer-section svelte-ikcr39"><h4 class="footer-subtitle svelte-ikcr39">リンク</h4> <ul class="footer-links svelte-ikcr39"><li class="svelte-ikcr39"><a href="/" class="svelte-ikcr39">ホーム</a></li> <!></ul></div></div> <div class="footer-bottom svelte-ikcr39"><p>&copy; 2024 トーナメント管理システム. All rights reserved.</p></div></div></footer> <!> <div class="notifications-container svelte-ikcr39"></div></div>');function La(m,b){Me(b,!1);const[G,B]=qe(),I=()=>ue(fe,"$authStore",G),Q=()=>ue(je,"$uiStore",G),ie=()=>ue(We,"$page",G),o=q(),k=q();let n=q(!1);Fe(()=>{S.loadTheme(),fe.initialize()});async function K(){try{S.setLoading(!0);const e=await fe.logout();e.success?(S.showNotification("ログアウトしました","success"),Qe("/")):S.showNotification(e.message||"ログアウトに失敗しました","error")}catch(e){console.error("Logout error:",e),S.showNotification("ログアウト処理でエラーが発生しました","error")}finally{S.setLoading(!1)}}function R(){F(n,!a(n))}function z(){F(n,!1)}function re(e){S.removeNotification(e)}function O(e){e.key==="Escape"&&a(n)&&z()}function d(e){return ie().url.pathname===e}we(()=>I(),()=>{F(o,I())}),we(()=>Q(),()=>{F(k,Q())}),Ge(),Le();var N=da();x("keydown",Ie,O);var C=i(N),P=i(C),U=i(P),V=r(i(U),2),E=i(V);let W;var le=r(E,2);{var oe=e=>{var t=sa(),c=J(t);let f;var D=r(c,2);A(ee=>{f=g(c,1,"nav-link svelte-ikcr39",null,f,ee),D.disabled=(a(o),y(()=>a(o).loading))},[()=>({active:d("/admin")})]),x("click",D,K),l(e,t)},v=e=>{var t=ia();let c;A(f=>c=g(t,1,"nav-link login-link svelte-ikcr39",null,c,f),[()=>({active:d("/login")})]),l(e,t)};h(le,e=>{a(o),y(()=>a(o).isAuthenticated)?e(oe):e(v,!1)})}s(V);var u=r(V,2),X=i(u);let Y;var Z=r(X,2);let w;var T=r(Z,2);let $;s(u),s(U),s(P);var ve=r(P,2);{var ne=e=>{var t=oa();let c;var f=i(t),D=i(f);let ee;var Be=r(D,2);{var Ne=L=>{var M=ra(),H=J(M);let ae;var ke=r(H,2);A(Te=>{ae=g(H,1,"mobile-nav-link svelte-ikcr39",null,ae,Te),ke.disabled=(a(o),y(()=>a(o).loading))},[()=>({active:d("/admin")})]),x("click",H,z),x("click",ke,()=>{K(),z()}),l(L,M)},Ee=L=>{var M=la();let H;A(ae=>H=g(M,1,"mobile-nav-link login-link svelte-ikcr39",null,H,ae),[()=>({active:d("/login")})]),x("click",M,z),l(L,M)};h(Be,L=>{a(o),y(()=>a(o).isAuthenticated)?L(Ne):L(Ee,!1)})}s(f),s(t),A((L,M)=>{c=g(t,1,"mobile-nav svelte-ikcr39",null,c,L),ee=g(D,1,"mobile-nav-link svelte-ikcr39",null,ee,M)},[()=>({open:a(n)}),()=>({active:d("/")})]),x("click",D,z),l(e,t)};h(ve,e=>{a(n)&&e(ne)})}s(C);var p=r(C,2),j=i(p);Pe(j,b,"default",{}),s(p);var ce=r(p,2),ge=i(ce),_e=i(ge),pe=r(i(_e),2),he=r(i(pe),2),ze=r(i(he),2);{var Ce=e=>{var t=va();l(e,t)},Se=e=>{var t=na();l(e,t)};h(ze,e=>{a(o),y(()=>a(o).isAuthenticated)?e(Ce):e(Se,!1)})}s(he),s(pe),s(_e),ye(2),s(ge),s(ce);var me=r(ce,2);{var Ae=e=>{var t=ca(),c=i(t),f=i(c);Oe(f,{size:"large"}),ye(2),s(c),s(t),l(e,t)};h(me,e=>{a(k),a(o),y(()=>a(k).loading||a(o).loading)&&e(Ae)})}var be=r(me,2);Ke(be,5,()=>(a(k),y(()=>a(k).notifications)),e=>e.id,(e,t)=>{ta(e,{get message(){return a(t),y(()=>a(t).message)},get type(){return a(t),y(()=>a(t).type)},duration:0,$$events:{close:()=>re(a(t).id)}})}),s(be),s(N),A((e,t,c,f)=>{W=g(E,1,"nav-link svelte-ikcr39",null,W,e),Ve(u,"aria-expanded",a(n)),Y=g(X,1,"hamburger-line svelte-ikcr39",null,Y,t),w=g(Z,1,"hamburger-line svelte-ikcr39",null,w,c),$=g(T,1,"hamburger-line svelte-ikcr39",null,$,f)},[()=>({active:d("/")}),()=>({open:a(n)}),()=>({open:a(n)}),()=>({open:a(n)})]),x("click",u,R),l(m,N),xe(),B()}export{La as component};
