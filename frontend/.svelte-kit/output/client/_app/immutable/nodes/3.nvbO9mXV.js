import{r as He,a as la}from"../chunks/DspYYv4h.js";import{g as Ia,a as Qe}from"../chunks/DnIs1vw8.js";import"../chunks/DsnmJJEf.js";import{i as Pe}from"../chunks/B1pWaKUj.js";import{v as ma,ap as Pa,aU as Ba,aV as Ra,l as Ea,e as Oa,D as Ua,a1 as Be,aB as ha,y as T,aE as he,C as e,A as i,aF as Re,a2 as x,a9 as o,a7 as s,a8 as r,$ as V,u as p,a4 as C,aa as L,ae as G,a5 as u,a6 as Ee,ag as Wa,ah as qe,ai as Le,aC as ba,a3 as pa,aW as Va,ac as Ja,aT as Ka,ad as Ga,af as Ha,L as na}from"../chunks/CuY-H75l.js";import{i as F}from"../chunks/DWiXyezG.js";import{e as Ze,i as ia,L as Xe}from"../chunks/CdAJyZzl.js";import{r as oa,s as me,u as Y,b as K,f as Ie,g as Qa}from"../chunks/CzS31Zl-.js";import{p as M,s as Xa,a as ca}from"../chunks/BKXpaS3L.js";import{m as ga,t as Ce,a as Ye}from"../chunks/DC-asg-G.js";import{b as va}from"../chunks/BjkiwGu8.js";import{s as da}from"../chunks/D43VgZms.js";import{b as ua}from"../chunks/IxeuUGQt.js";function ea(v,l,w=!1){if(v.multiple){if(l==null)return;if(!Pa(l))return Ba();for(var y of v.options)y.selected=l.includes($e(y));return}for(y of v.options){var c=$e(y);if(Ra(c,l)){y.selected=!0;return}}(!w||l!==void 0)&&(v.selectedIndex=-1)}function xa(v){var l=new MutationObserver(()=>{ea(v,v.__value)});l.observe(v,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ma(()=>{l.disconnect()})}function Ya(v,l,w=l){var y=!0;Ea(v,"change",c=>{var m=c?"[selected]":":checked",b;if(v.multiple)b=[].map.call(v.querySelectorAll(m),$e);else{var $=v.querySelector(m)??v.querySelector("option:not([disabled])");b=$&&$e($)}w(b)}),Oa(()=>{var c=l();if(ea(v,c,y),y&&c===void 0){var m=v.querySelector(":checked");m!==null&&(c=$e(m),w(c))}v.__value=c,y=!1}),xa(v)}function $e(v){return"__value"in v?v.__value:v.value}function fa(v,l,w){var y=Ua(v,l);y&&y.set&&(v[l]=w,ma(()=>{v[l]=null}))}function Za(v){return function(...l){var w=l[0];return w.preventDefault(),v?.apply(this,l)}}async function et({url:v,fetch:l}){if(typeof window<"u"){const w=Ia();if(!w)throw He(302,"/login?redirect="+encodeURIComponent(v.pathname));try{const y=JSON.parse(atob(w.split(".")[1])),c=Math.floor(Date.now()/1e3);if(y.exp&&y.exp<c)throw He(302,"/login?expired=true&redirect="+encodeURIComponent(v.pathname))}catch(y){throw console.error("Token validation error:",y),He(302,"/login?invalid=true&redirect="+encodeURIComponent(v.pathname))}}return{title:"管理者ダッシュボード"}}const Gt=Object.freeze(Object.defineProperty({__proto__:null,load:et},Symbol.toStringTag,{value:"Module"}));var at=x('<div class="round-info svelte-n4hemx"><span class="round-label svelte-n4hemx">ラウンド:</span> <span class="round-value svelte-n4hemx"> </span></div>'),tt=x('<span class="error-message svelte-n4hemx"> </span>'),rt=x('<span class="error-message svelte-n4hemx"> </span>'),st=x('<div class="winner-preview svelte-n4hemx"><span class="winner-label svelte-n4hemx">勝者:</span> <span class="winner-value svelte-n4hemx"> </span></div>'),lt=x('<span class="loading-spinner svelte-n4hemx"></span> 保存中...',1),nt=x('<form class="admin-match-form svelte-n4hemx"><h3 class="svelte-n4hemx">試合結果入力</h3> <div class="match-info svelte-n4hemx"><span class="team svelte-n4hemx"> </span> <span class="vs svelte-n4hemx">vs</span> <span class="team svelte-n4hemx"> </span></div> <!> <div class="score-inputs svelte-n4hemx"><div class="score-group svelte-n4hemx"><label for="score1" class="svelte-n4hemx"> </label> <input type="number" id="score1" min="0" required data-testid="score1"/> <!></div> <div class="score-group svelte-n4hemx"><label for="score2" class="svelte-n4hemx"> </label> <input type="number" id="score2" min="0" required data-testid="score2"/> <!></div></div> <!> <div class="form-actions svelte-n4hemx"><button type="button" class="cancel-button svelte-n4hemx">キャンセル</button> <button type="submit" class="submit-button svelte-n4hemx" data-testid="submit-result"><!></button></div></form>');function it(v,l){Be(l,!1);const w=T(),y=T();let c=M(l,"match",24,()=>({})),m=M(l,"onSubmit",8,()=>{}),b=M(l,"disabled",8,!1);const $=ha();let S=T(c().score1||""),k=T(c().score2||""),P=T(!1),q=T({}),R=T({score1:!1,score2:!1});function Q(n,_){const I=Number(n),ue=Number(_);return isNaN(I)||isNaN(ue)||n===""||_===""?"":I>ue?c().team1||"Team A":ue>I?c().team2||"Team B":"引き分け"}function N(n){Wa(R,e(R)[n]=!0)}async function ae(){i(R,{score1:!0,score2:!0});const n=la(e(S),e(k));if(!n.isValid){i(q,n.errors),Y.showNotification("入力内容を確認してください","error");return}i(P,!0),Y.setLoading(!0);try{const _={score1:Number(e(S)),score2:Number(e(k)),winner:e(y)};if(c().id){const I=await ga.updateMatch(c().id,_);if(I.success)Y.showNotification("試合結果を更新しました","success"),$("success",{match:c().id,result:_}),typeof m()=="function"&&m()(_);else throw new Error(I.message||"試合結果の更新に失敗しました")}else typeof m()=="function"&&await m()(_),Y.showNotification("試合結果を保存しました","success"),$("success",{result:_})}catch(_){console.error("Submit error:",_),Y.showNotification(_.message||"試合結果の保存に失敗しました","error"),$("error",{error:_.message})}finally{i(P,!1),Y.setLoading(!1)}}function ie(){i(S,c().score1||""),i(k,c().score2||""),i(q,{}),i(R,{score1:!1,score2:!1})}function oe(){ie(),$("cancel")}he(()=>(e(R),e(S),e(k)),()=>{if(e(R).score1||e(R).score2){const n=la(e(S),e(k));i(q,n.errors)}}),he(()=>(e(q),e(S),e(k)),()=>{i(w,Object.keys(e(q)).length===0&&e(S)!==""&&e(k)!=="")}),he(()=>(e(S),e(k)),()=>{i(y,Q(e(S),e(k)))}),Re(),Pe();var A=nt(),g=o(s(A),2),z=s(g),Z=s(z,!0);r(z);var te=o(z,4),ee=s(te,!0);r(te),r(g);var H=o(g,2);{var be=n=>{var _=at(),I=o(s(_),2),ue=s(I,!0);r(I),r(_),C(()=>L(ue,(V(c()),p(()=>c().round)))),u(n,_)};F(H,n=>{V(c()),p(()=>c().round)&&n(be)})}var pe=o(H,2),ve=s(pe),re=s(ve),Me=s(re);r(re);var se=o(re,2);oa(se);let ge;var ke=o(se,2);{var Fe=n=>{var _=tt(),I=s(_,!0);r(_),C(()=>L(I,(e(q),p(()=>e(q).score1)))),u(n,_)};F(ke,n=>{e(q),p(()=>e(q).score1)&&n(Fe)})}r(ve);var Ne=o(ve,2),de=s(Ne),je=s(de);r(de);var le=o(de,2);oa(le);let xe;var Ae=o(le,2);{var Te=n=>{var _=rt(),I=s(_,!0);r(_),C(()=>L(I,(e(q),p(()=>e(q).score2)))),u(n,_)};F(Ae,n=>{e(q),p(()=>e(q).score2)&&n(Te)})}r(Ne),r(pe);var we=o(pe,2);{var d=n=>{var _=st(),I=o(s(_),2),ue=s(I,!0);r(I),r(_),C(()=>L(ue,e(y))),u(n,_)};F(we,n=>{e(y)&&e(w)&&n(d)})}var t=o(we,2),E=s(t),X=o(E,2),O=s(X);{var D=n=>{var _=lt();qe(),u(n,_)},j=n=>{var _=Le("結果を保存");u(n,_)};F(O,n=>{e(P)?n(D):n(j,!1)})}r(X),r(t),r(A),C((n,_)=>{L(Z,(V(c()),p(()=>c().team1||"Team A"))),L(ee,(V(c()),p(()=>c().team2||"Team B"))),L(Me,`${V(c()),p(()=>c().team1||"Team A")??""} スコア`),se.disabled=b()||e(P),ge=me(se,1,"svelte-n4hemx",null,ge,n),L(je,`${V(c()),p(()=>c().team2||"Team B")??""} スコア`),le.disabled=b()||e(P),xe=me(le,1,"svelte-n4hemx",null,xe,_),E.disabled=e(P),X.disabled=!e(w)||b()||e(P)},[()=>({error:e(q).score1}),()=>({error:e(q).score2})]),va(se,()=>e(S),n=>i(S,n)),G("blur",se,()=>N("score1")),va(le,()=>e(k),n=>i(k,n)),G("blur",le,()=>N("score2")),G("click",E,oe),G("submit",A,Za(ae)),u(v,A),Ee()}var ot=x('<span class="btn-spinner svelte-qfafqz" aria-hidden="true"></span>'),ct=x('<a role="button"><!> <!></a>'),vt=x('<span class="btn-spinner svelte-qfafqz" aria-hidden="true"></span>'),dt=x("<button><!> <!></button>");function De(v,l){Be(l,!1);const w=T();let y=M(l,"variant",8,"primary"),c=M(l,"size",8,"medium"),m=M(l,"disabled",8,!1),b=M(l,"loading",8,!1),$=M(l,"type",8,"button"),S=M(l,"href",8,null),k=M(l,"target",8,null),P=M(l,"fullWidth",8,!1),q=M(l,"outline",8,!1);function R(A){if(m()||b()){A.preventDefault();return}}function Q(A){m()||b()||(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),A.currentTarget.click())}he(()=>(V(y()),V(c()),V(q()),V(P()),V(m()),V(b())),()=>{i(w,["btn",`btn-${y()}`,`btn-${c()}`,q()?"btn-outline":"",P()?"btn-full-width":"",m()?"btn-disabled":"",b()?"btn-loading":""].filter(Boolean).join(" "))}),Re(),Pe();var N=ba(),ae=pa(N);{var ie=A=>{var g=ct();let z;var Z=s(g);{var te=H=>{var be=ot();u(H,be)};F(Z,H=>{b()&&H(te)})}var ee=o(Z,2);da(ee,l,"default",{}),r(g),C(H=>{K(g,"href",S()),K(g,"target",k()),z=me(g,1,Ie(e(w)),"svelte-qfafqz",z,H),K(g,"tabindex",m()?-1:0),K(g,"aria-disabled",m())},[()=>({disabled:m()})]),G("click",g,R),G("keydown",g,Q),u(A,g)},oe=A=>{var g=dt(),z=s(g);{var Z=ee=>{var H=vt();u(ee,H)};F(z,ee=>{b()&&ee(Z)})}var te=o(z,2);da(te,l,"default",{}),r(g),C(()=>{K(g,"type",$()),g.disabled=m(),me(g,1,Ie(e(w)),"svelte-qfafqz"),K(g,"aria-disabled",m())}),G("click",g,R),u(A,g)};F(ae,A=>{S()?A(ie):A(oe,!1)})}u(v,N),Ee()}var ut=x('<span class="select-required-mark svelte-170cbq6" aria-label="必須">*</span>'),ft=x("<label> <!></label>"),_t=x('<option class="svelte-170cbq6"> </option>'),mt=x("<select multiple></select>"),ht=x('<option disabled class="svelte-170cbq6"> </option>'),bt=x('<option class="svelte-170cbq6"> </option>'),pt=x("<select><!><!></select>"),gt=x('<div class="select-arrow svelte-170cbq6" aria-hidden="true"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></div>'),xt=x('<div class="select-helper-text svelte-170cbq6"> </div>'),wt=x('<div class="select-error-message svelte-170cbq6" role="alert"> </div>'),yt=x('<div><!> <div class="select-wrapper svelte-170cbq6"><!> <!></div> <!> <!></div>');function _a(v,l){Be(l,!1);const w=T(),y=T(),c=T();let m=M(l,"value",12,""),b=M(l,"options",24,()=>[]),$=M(l,"placeholder",8,"選択してください"),S=M(l,"disabled",8,!1),k=M(l,"required",8,!1),P=M(l,"size",8,"medium"),q=M(l,"variant",8,"default"),R=M(l,"label",8,""),Q=M(l,"helperText",8,""),N=M(l,"errorMessage",8,""),ae=M(l,"id",8,""),ie=M(l,"name",8,""),oe=M(l,"multiple",8,!1),A=M(l,"fullWidth",8,!1);const g=ha();let z=T(),Z=T(!1);function te(d){oe()?m(Array.from(d.target.selectedOptions,t=>t.value)):m(d.target.value),g("change",{value:m(),event:d})}function ee(d){i(Z,!0),g("focus",{value:m(),event:d})}function H(d){i(Z,!1),g("blur",{value:m(),event:d})}function be(d){g("keydown",{value:m(),event:d})}function pe(){e(z)&&e(z).focus()}function ve(){e(z)&&e(z).blur()}he(()=>V(ae()),()=>{i(w,ae()||`select-${Math.random().toString(36).substr(2,9)}`)}),he(()=>(V(N()),V(q())),()=>{i(y,N()?"error":q())}),he(()=>(V(P()),e(y),V(A()),e(Z),V(S())),()=>{i(c,["select",`select-${P()}`,`select-${e(y)}`,A()?"select-full-width":"",e(Z)?"select-focused":"",S()?"select-disabled":""].filter(Boolean).join(" "))}),Re(),Pe();var re=yt();let Me;var se=s(re);{var ge=d=>{var t=ft();let E;var X=s(t),O=o(X);{var D=j=>{var n=ut();u(j,n)};F(O,j=>{k()&&j(D)})}r(t),C(j=>{K(t,"for",e(w)),E=me(t,1,"select-label svelte-170cbq6",null,E,j),L(X,`${R()??""} `)},[()=>({"select-label-required":k()})]),u(d,t)};F(se,d=>{R()&&d(ge)})}var ke=o(se,2),Fe=s(ke);{var Ne=d=>{var t=mt();Ze(t,5,b,ia,(X,O)=>{var D=_t(),j=s(D,!0);r(D);var n={};C(()=>{D.disabled=(e(O),p(()=>e(O).disabled||!1)),L(j,(e(O),p(()=>e(O).label))),n!==(n=(e(O),p(()=>e(O).value)))&&(D.value=(D.__value=(e(O),p(()=>e(O).value)))??"")}),u(X,D)}),r(t),ua(t,X=>i(z,X),()=>e(z));var E;xa(t),C(()=>{K(t,"id",e(w)),K(t,"name",ie()),t.disabled=S(),t.required=k(),me(t,1,Ie(e(c)),"svelte-170cbq6"),K(t,"aria-describedby",Q()||N()?`${e(w)}-help`:void 0),K(t,"aria-invalid",N()?"true":"false"),E!==(E=m())&&(t.value=(t.__value=m())??"",ea(t,m()))}),G("change",t,te),G("focus",t,ee),G("blur",t,H),G("keydown",t,be),u(d,t)},de=d=>{var t=pt();C(()=>{m(),Va(()=>{e(z),e(w),ie(),S(),k(),e(c),Q(),N(),$(),b()})});var E=s(t);{var X=D=>{var j=ht(),n=s(j,!0);r(j),j.value=j.__value="",C(()=>{Qa(j,!m()),L(n,$())}),u(D,j)};F(E,D=>{$()&&D(X)})}var O=o(E);Ze(O,1,b,ia,(D,j)=>{var n=bt(),_=s(n,!0);r(n);var I={};C(()=>{n.disabled=(e(j),p(()=>e(j).disabled||!1)),L(_,(e(j),p(()=>e(j).label))),I!==(I=(e(j),p(()=>e(j).value)))&&(n.value=(n.__value=(e(j),p(()=>e(j).value)))??"")}),u(D,n)}),r(t),ua(t,D=>i(z,D),()=>e(z)),C(()=>{K(t,"id",e(w)),K(t,"name",ie()),t.disabled=S(),t.required=k(),me(t,1,Ie(e(c)),"svelte-170cbq6"),K(t,"aria-describedby",Q()||N()?`${e(w)}-help`:void 0),K(t,"aria-invalid",N()?"true":"false")}),Ya(t,m),G("change",t,te),G("focus",t,ee),G("blur",t,H),G("keydown",t,be),u(d,t)};F(Fe,d=>{oe()?d(Ne):d(de,!1)})}var je=o(Fe,2);{var le=d=>{var t=gt();u(d,t)};F(je,d=>{oe()||d(le)})}r(ke);var xe=o(ke,2);{var Ae=d=>{var t=xt(),E=s(t,!0);r(t),C(()=>{K(t,"id",`${e(w)??""}-help`),L(E,Q())}),u(d,t)};F(xe,d=>{Q()&&!N()&&d(Ae)})}var Te=o(xe,2);{var we=d=>{var t=wt(),E=s(t,!0);r(t),C(()=>{K(t,"id",`${e(w)??""}-help`),L(E,N())}),u(d,t)};F(Te,d=>{N()&&d(we)})}return r(re),C(d=>Me=me(re,1,"select-container svelte-170cbq6",null,Me,d),[()=>({"select-container-full-width":A()})]),u(v,re),fa(l,"focus",pe),fa(l,"blur",ve),Ee({focus:pe,blur:ve})}var kt=x('<span class="updating-indicator svelte-kc3jxr">更新中...</span>'),jt=x('<div class="control-group svelte-kc3jxr"><label for="format-select" class="svelte-kc3jxr">トーナメント形式 <!></label> <!> <!></div>'),St=x('<div class="loading-container svelte-kc3jxr"><!> <p>試合データを読み込み中...</p></div>'),qt=x('<div class="empty-state svelte-kc3jxr"><p class="svelte-kc3jxr">未完了の試合はありません</p> <!></div>'),Mt=x('<span class="team-score svelte-kc3jxr"> </span>'),Ft=x('<span class="team-score svelte-kc3jxr"> </span>'),Nt=x('<div class="winner-info svelte-kc3jxr"><span class="winner-label svelte-kc3jxr">勝者:</span> <span class="winner-name svelte-kc3jxr"> </span></div>'),At=x('<div class="schedule-info svelte-kc3jxr"><span class="schedule-label svelte-kc3jxr">予定:</span> <span class="schedule-time"> </span></div>'),Tt=x('<div class="match-card svelte-kc3jxr"><div class="match-header svelte-kc3jxr"><span class="round-label svelte-kc3jxr"> </span> <span> </span></div> <div class="match-teams svelte-kc3jxr"><div class="team svelte-kc3jxr"><span class="team-name svelte-kc3jxr"> </span> <!></div> <div class="vs-divider svelte-kc3jxr">vs</div> <div class="team svelte-kc3jxr"><span class="team-name svelte-kc3jxr"> </span> <!></div></div> <!> <!> <div class="match-actions svelte-kc3jxr"><!></div></div>'),zt=x('<div class="matches-grid svelte-kc3jxr"></div>'),Ct=x('<section class="form-section svelte-kc3jxr"><div class="form-overlay svelte-kc3jxr"></div> <div class="form-container svelte-kc3jxr"><!></div></section>'),Lt=x('<div class="admin-container svelte-kc3jxr"><header class="admin-header svelte-kc3jxr"><div class="header-content svelte-kc3jxr"><h1 class="svelte-kc3jxr">管理者ダッシュボード</h1> <div class="header-actions svelte-kc3jxr"><!> <!></div></div> <p class="header-description svelte-kc3jxr">試合結果の入力とトーナメント管理</p></header> <section class="control-panel svelte-kc3jxr"><div class="control-group svelte-kc3jxr"><label for="sport-select" class="svelte-kc3jxr">スポーツ選択</label> <!></div> <!></section> <section class="matches-section"><div class="section-header svelte-kc3jxr"><h2 class="svelte-kc3jxr"> </h2> <!></div> <!></section> <!></div>');function Ht(v,l){Be(l,!1);const[w,y]=Xa(),c=()=>ca(Qe,"$authStore",w),m=()=>ca(Ce,"$tournamentStore",w);let b=T("volleyball"),$=T([]),S=T([]),k=T(""),P=T(null),q=T(!1),R=T(!1),Q=T(!1),N=T(!1),ae=null;const ie=[{value:"volleyball",label:"バレーボール"},{value:"table_tennis",label:"卓球"},{value:"soccer",label:"8人制サッカー"}];let oe=T(),A=T();Ja(async()=>{e(oe).isAuthenticated||await Qe.checkAuthStatus(),await g(),Me()}),Ka(()=>{se()});async function g(){await Promise.all([z(),Z()])}async function z(){i(q,!0);try{const a=await ga.getPendingMatches(e(b));a.success?(i($,a.data||[]),Y.showNotification(`${ge(e(b))}の未完了試合を${e($).length}件取得しました`,"success",3e3)):(console.error("Failed to load pending matches:",a),Y.showNotification(a.message||"未完了試合の取得に失敗しました","error"),i($,[]))}catch(a){console.error("Load pending matches error:",a),Y.showNotification("未完了試合の取得でエラーが発生しました","error"),i($,[])}finally{i(q,!1)}}async function Z(){i(R,!0);try{const a=await Ye.getAvailableFormats(e(b));if(a.success){i(S,a.data||[]);const h=await Ye.getTournament(e(b));h.success&&h.data&&i(k,h.data.format||"")}else console.error("Failed to load available formats:",a),i(S,[]),i(k,"")}catch(a){console.error("Load available formats error:",a),i(S,[]),i(k,"")}finally{i(R,!1)}}async function te(a){const h=a.target.value;h!==e(b)&&(i(b,h),i(P,null),i(N,!1),await g(),Ce.switchSport(e(b)))}async function ee(a){const h=a.target.value;if(h===e(k))return;if(e($).some(J=>J.status==="completed"||J.score1!==null&&J.score2!==null)&&!confirm("既存の試合結果があります。形式を変更すると、これらの結果に影響する可能性があります。続行しますか？")){a.target.value=e(k);return}i(Q,!0);try{const J=await Ye.updateTournamentFormat(e(b),h);J.success?(i(k,h),Y.showNotification(`${ge(e(b))}の形式を${h}に変更しました`,"success"),await g(),await Ce.refreshData(e(b))):(console.error("Failed to update tournament format:",J),Y.showNotification(J.message||"トーナメント形式の変更に失敗しました","error"),a.target.value=e(k))}catch(J){console.error("Update tournament format error:",J),Y.showNotification("トーナメント形式の変更でエラーが発生しました","error"),a.target.value=e(k)}finally{i(Q,!1)}}function H(a){i(P,a),i(N,!0)}async function be(a){const{match:h,result:U}=a.detail;await z(),await Ce.refreshData(e(b)),i(N,!1),i(P,null),Y.showNotification("試合結果を更新し、トーナメントデータを同期しました","success")}function pe(a){const{error:h}=a.detail;console.error("Match submit error:",h)}function ve(){i(N,!1),i(P,null)}async function re(){await g(),await Ce.refreshData(e(b)),Y.showNotification("データを更新しました","success",2e3)}function Me(){ae=setInterval(async()=>{if(!document.hidden&&!e(N))try{await z()}catch(a){console.error("Auto refresh error:",a)}},6e4)}function se(){ae&&(clearInterval(ae),ae=null)}function ge(a){const h=ie.find(U=>U.value===a);return h?h.label:a}function ke(a){return{pending:"未実施",in_progress:"進行中",completed:"完了",cancelled:"キャンセル"}[a]||a}function Fe(a){return{pending:"status-pending",in_progress:"status-progress",completed:"status-completed",cancelled:"status-cancelled"}[a]||"status-default"}async function Ne(){confirm("ログアウトしますか？")&&(await Qe.logout(),window.location.href="/")}he(()=>c(),()=>{i(oe,c())}),he(()=>m(),()=>{i(A,m())}),Re(),Pe();var de=Lt();Ga(a=>{Ha.title="管理者ダッシュボード - Tournament Management System"});var je=s(de),le=s(je),xe=o(s(le),2),Ae=s(xe);De(Ae,{variant:"outline",size:"small",get disabled(){return e(q)},$$events:{click:re},children:(a,h)=>{qe();var U=Le("更新");u(a,U)},$$slots:{default:!0}});var Te=o(Ae,2);De(Te,{variant:"secondary",size:"small",$$events:{click:Ne},children:(a,h)=>{qe();var U=Le("ログアウト");u(a,U)},$$slots:{default:!0}}),r(xe),r(le),qe(2),r(je);var we=o(je,2),d=s(we),t=o(s(d),2);_a(t,{id:"sport-select",get options(){return ie},get disabled(){return e(q)},get value(){return e(b)},set value(a){i(b,a)},$$events:{change:te},$$legacy:!0}),r(d);var E=o(d,2);{var X=a=>{var h=jt(),U=s(h),J=o(s(U));{var ze=f=>{Xe(f,{size:"small"})};F(J,f=>{e(R)&&f(ze)})}r(U);var fe=o(U,2);{let f=na(()=>(e(S),p(()=>e(S).map(ce=>({value:ce,label:ce}))))),ye=na(()=>e(R)||e(Q));_a(fe,{id:"format-select",get options(){return e(f)},get disabled(){return e(ye)},get value(){return e(k)},set value(ce){i(k,ce)},$$events:{change:ee},$$legacy:!0})}var _e=o(fe,2);{var Se=f=>{var ye=kt();u(f,ye)};F(_e,f=>{e(Q)&&f(Se)})}r(h),u(a,h)};F(E,a=>{e(S),p(()=>e(S).length>0)&&a(X)})}r(we);var O=o(we,2),D=s(O),j=s(D),n=s(j);r(j);var _=o(j,2);{var I=a=>{Xe(a,{size:"small"})};F(_,a=>{e(q)&&a(I)})}r(D);var ue=o(D,2);{var wa=a=>{var h=St(),U=s(h);Xe(U,{}),qe(2),r(h),u(a,h)},ya=a=>{var h=ba(),U=pa(h);{var J=fe=>{var _e=qt(),Se=o(s(_e),2);De(Se,{variant:"outline",$$events:{click:re},children:(f,ye)=>{qe();var ce=Le("データを更新");u(f,ce)},$$slots:{default:!0}}),r(_e),u(fe,_e)},ze=fe=>{var _e=zt();Ze(_e,5,()=>e($),Se=>Se.id,(Se,f)=>{var ye=Tt(),ce=s(ye),Oe=s(ce),Sa=s(Oe,!0);r(Oe);var Ue=o(Oe,2),qa=s(Ue,!0);r(Ue),r(ce);var We=o(ce,2),Ve=s(We),Je=s(Ve),Ma=s(Je,!0);r(Je);var Fa=o(Je,2);{var Na=B=>{var W=Mt(),ne=s(W,!0);r(W),C(()=>L(ne,(e(f),p(()=>e(f).score1)))),u(B,W)};F(Fa,B=>{e(f),p(()=>e(f).score1!==null)&&B(Na)})}r(Ve);var aa=o(Ve,4),Ke=s(aa),Aa=s(Ke,!0);r(Ke);var Ta=o(Ke,2);{var za=B=>{var W=Ft(),ne=s(W,!0);r(W),C(()=>L(ne,(e(f),p(()=>e(f).score2)))),u(B,W)};F(Ta,B=>{e(f),p(()=>e(f).score2!==null)&&B(za)})}r(aa),r(We);var ta=o(We,2);{var Ca=B=>{var W=Nt(),ne=o(s(W),2),Ge=s(ne,!0);r(ne),r(W),C(()=>L(Ge,(e(f),p(()=>e(f).winner)))),u(B,W)};F(ta,B=>{e(f),p(()=>e(f).winner)&&B(Ca)})}var ra=o(ta,2);{var La=B=>{var W=At(),ne=o(s(W),2),Ge=s(ne,!0);r(ne),r(W),C(Da=>L(Ge,Da),[()=>(e(f),p(()=>new Date(e(f).scheduled_at).toLocaleString("ja-JP")))]),u(B,W)};F(ra,B=>{e(f),p(()=>e(f).scheduled_at)&&B(La)})}var sa=o(ra,2),$a=s(sa);De($a,{variant:"primary",size:"small",get disabled(){return e(N)},$$events:{click:()=>H(e(f))},children:(B,W)=>{qe();var ne=Le("結果入力");u(B,ne)},$$slots:{default:!0}}),r(sa),r(ye),C((B,W)=>{L(Sa,(e(f),p(()=>e(f).round))),me(Ue,1,`status-badge ${B??""}`,"svelte-kc3jxr"),L(qa,W),L(Ma,(e(f),p(()=>e(f).team1))),L(Aa,(e(f),p(()=>e(f).team2)))},[()=>(e(f),p(()=>Fe(e(f).status))),()=>(e(f),p(()=>ke(e(f).status)))]),u(Se,ye)}),r(_e),u(fe,_e)};F(U,fe=>{e($),p(()=>e($).length===0)?fe(J):fe(ze,!1)},!0)}u(a,h)};F(ue,a=>{e(q)?a(wa):a(ya,!1)})}r(O);var ka=o(O,2);{var ja=a=>{var h=Ct(),U=s(h),J=o(U,2),ze=s(J);it(ze,{get match(){return e(P)},$$events:{success:be,error:pe,cancel:ve}}),r(J),r(h),G("click",U,ve),u(a,h)};F(ka,a=>{e(N)&&e(P)&&a(ja)})}r(de),C(a=>L(n,`${a??""}の未完了試合`),[()=>(e(b),p(()=>ge(e(b))))]),u(v,de),Ee(),y()}export{Ht as component,Gt as universal};
