import"../chunks/DsnmJJEf.js";import"../chunks/DUpwANU7.js";import{c as De,a as He,e as S,o as Ke}from"../chunks/CT_lE3Pl.js";import{h as Fe,a as Ge,a3 as Le,K as J,J as Q,aB as de,a4 as R,A as a,a1 as l,a6 as Me,$ as m,a7 as i,a8 as s,a9 as r,a5 as E,aD as ie,aE as we,aF as Ie,aG as Je,u as M,ar as ye}from"../chunks/BqLxJNge.js";import{i as b}from"../chunks/B7cxby2x.js";import{e as Oe,L as Pe}from"../chunks/YSpBSuTq.js";import{s as h,u as N,b as Ve,e as je}from"../chunks/DT5H3szw.js";import{i as xe}from"../chunks/B2k5sg_-.js";import{p as se,s as qe,a as ue}from"../chunks/CCKrlfp6.js";import{s as Qe,g as Re}from"../chunks/BGq6rDGP.js";import{a as fe}from"../chunks/DWufORZG.js";import{b as Ue}from"../chunks/DXDn204r.js";function We(g,d,A,k,T){Fe&&Ge();var w=d.$$slots?.[A],D=!1;w===!0&&(w=d.children,D=!0),w===void 0||w(g,D?()=>k:k)}const Xe=()=>{const g=Qe;return{page:{subscribe:g.page.subscribe},navigating:{subscribe:g.navigating.subscribe},updated:g.updated}},Ye={subscribe(g){return Xe().page.subscribe(g)}};var Ze=ie('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),$e=ie('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>'),ea=ie('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),aa=ie('<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>'),ta=m('<button class="toast-close svelte-trunga" aria-label="通知を閉じる" type="button"><svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button>'),sa=m('<div role="alert" aria-live="polite" aria-atomic="true"><div class="toast-content svelte-trunga"><div class="toast-icon svelte-trunga"><!></div> <div class="toast-message svelte-trunga"> </div> <!></div></div>');function ia(g,d){Le(d,!1);let A=se(d,"message",8,""),k=se(d,"type",8,"info"),T=se(d,"duration",8,5e3),w=se(d,"dismissible",8,!0);const D=De();let o=Q(!0),y;T()>0&&(y=setTimeout(()=>{n()},T()));function n(){J(o,!1),y&&clearTimeout(y),D("close")}let O=Q();xe();var U=de(),B=R(U);{var re=P=>{var u=sa(),H=i(u),C=i(H),V=i(C);{var W=v=>{var f=Ze();l(v,f)},j=v=>{var f=de(),Y=R(f);{var Z=L=>{var F=$e();l(L,F)},$=L=>{var F=de(),ee=R(F);{var ve=p=>{var q=ea();l(p,q)},ne=p=>{var q=aa();l(p,q)};b(ee,p=>{k()==="warning"?p(ve):p(ne,!1)},!0)}l(L,F)};b(Y,L=>{k()==="error"?L(Z):L($,!1)},!0)}l(v,f)};b(V,v=>{k()==="success"?v(W):v(j,!1)})}s(C);var K=r(C,2),X=i(K,!0);s(K);var le=r(K,2);{var oe=v=>{var f=ta();S("click",f,n),l(v,f)};b(le,v=>{w()&&v(oe)})}s(H),s(u),Ue(u,v=>J(O,v),()=>a(O)),E(()=>{h(u,1,`toast toast-${k()??""}`,"svelte-trunga"),He(X,A())}),l(P,u)};b(B,P=>{a(o)&&P(re)})}l(g,U),Me()}var ra=m('<a href="/admin">管理ダッシュボード</a> <button class="nav-button logout-button svelte-ikcr39">ログアウト</button>',1),la=m('<a href="/login">管理者ログイン</a>'),oa=m('<a href="/admin">管理ダッシュボード</a> <button class="mobile-nav-button logout-button svelte-ikcr39">ログアウト</button>',1),va=m('<a href="/login">管理者ログイン</a>'),na=m('<div><div class="mobile-nav-content svelte-ikcr39"><a href="/">ホーム</a> <!></div></div>'),ca=m('<li class="svelte-ikcr39"><a href="/admin" class="svelte-ikcr39">管理ダッシュボード</a></li>'),da=m('<li class="svelte-ikcr39"><a href="/login" class="svelte-ikcr39">管理者ログイン</a></li>'),ua=m('<div class="loading-overlay svelte-ikcr39"><div class="loading-content svelte-ikcr39"><!> <p class="loading-text svelte-ikcr39">処理中...</p></div></div>'),fa=m('<div class="app-layout svelte-ikcr39"><header class="header svelte-ikcr39"><div class="container"><nav class="navbar svelte-ikcr39"><div class="navbar-brand svelte-ikcr39"><a href="/" class="brand-link svelte-ikcr39"><h1 class="brand-title svelte-ikcr39">トーナメント管理</h1></a></div> <div class="navbar-nav desktop-nav svelte-ikcr39"><a href="/">ホーム</a> <!></div> <button class="mobile-menu-button svelte-ikcr39" aria-label="メニューを開く"><span></span> <span></span> <span></span></button></nav></div> <!></header> <main class="main-content svelte-ikcr39"><!></main> <footer class="footer svelte-ikcr39"><div class="container"><div class="footer-content svelte-ikcr39"><div class="footer-section svelte-ikcr39"><h3 class="footer-title svelte-ikcr39">トーナメント管理システム</h3> <p class="footer-description svelte-ikcr39">バレーボール、卓球、8人制サッカーのトーナメント管理</p></div> <div class="footer-section svelte-ikcr39"><h4 class="footer-subtitle svelte-ikcr39">リンク</h4> <ul class="footer-links svelte-ikcr39"><li class="svelte-ikcr39"><a href="/" class="svelte-ikcr39">ホーム</a></li> <!></ul></div></div> <div class="footer-bottom svelte-ikcr39"><p>&copy; 2024 トーナメント管理システム. All rights reserved.</p></div></div></footer> <!> <div class="notifications-container svelte-ikcr39"></div></div>');function za(g,d){Le(d,!1);const[A,k]=qe(),T=()=>ue(fe,"$authStore",A),w=()=>ue(je,"$uiStore",A),D=()=>ue(Ye,"$page",A),o=Q(),y=Q();let n=Q(!1);Ke(()=>{N.loadTheme(),fe.initialize()});async function O(){try{N.setLoading(!0);const e=await fe.logout();e.success?(N.showNotification("ログアウトしました","success"),Re("/")):N.showNotification(e.message||"ログアウトに失敗しました","error")}catch(e){console.error("Logout error:",e),N.showNotification("ログアウト処理でエラーが発生しました","error")}finally{N.setLoading(!1)}}function U(){J(n,!a(n))}function B(){J(n,!1)}function re(e){N.removeNotification(e)}function P(e){e.key==="Escape"&&a(n)&&B()}function u(e){return D().url.pathname===e}we(()=>T(),()=>{J(o,T())}),we(()=>w(),()=>{J(y,w())}),Ie(),xe();var H=fa();S("keydown",Je,P);var C=i(H),V=i(C),W=i(V),j=r(i(W),2),K=i(j);let X;var le=r(K,2);{var oe=e=>{var t=ra(),c=R(t);let _;var G=r(c,2);E(ae=>{_=h(c,1,"nav-link svelte-ikcr39",null,_,ae),G.disabled=(a(o),M(()=>a(o).loading))},[()=>({active:u("/admin")})]),S("click",G,O),l(e,t)},v=e=>{var t=la();let c;E(_=>c=h(t,1,"nav-link login-link svelte-ikcr39",null,c,_),[()=>({active:u("/login")})]),l(e,t)};b(le,e=>{a(o),M(()=>a(o).isAuthenticated)?e(oe):e(v,!1)})}s(j);var f=r(j,2),Y=i(f);let Z;var $=r(Y,2);let L;var F=r($,2);let ee;s(f),s(W),s(V);var ve=r(V,2);{var ne=e=>{var t=na();let c;var _=i(t),G=i(_);let ae;var Ce=r(G,2);{var Ne=x=>{var z=oa(),I=R(z);let te;var ke=r(I,2);E(Te=>{te=h(I,1,"mobile-nav-link svelte-ikcr39",null,te,Te),ke.disabled=(a(o),M(()=>a(o).loading))},[()=>({active:u("/admin")})]),S("click",I,B),S("click",ke,()=>{O(),B()}),l(x,z)},Ee=x=>{var z=va();let I;E(te=>I=h(z,1,"mobile-nav-link login-link svelte-ikcr39",null,I,te),[()=>({active:u("/login")})]),S("click",z,B),l(x,z)};b(Ce,x=>{a(o),M(()=>a(o).isAuthenticated)?x(Ne):x(Ee,!1)})}s(_),s(t),E((x,z)=>{c=h(t,1,"mobile-nav svelte-ikcr39",null,c,x),ae=h(G,1,"mobile-nav-link svelte-ikcr39",null,ae,z)},[()=>({open:a(n)}),()=>({active:u("/")})]),S("click",G,B),l(e,t)};b(ve,e=>{a(n)&&e(ne)})}s(C);var p=r(C,2),q=i(p);We(q,d,"default",{}),s(p);var ce=r(p,2),ge=i(ce),_e=i(ge),he=r(i(_e),2),me=r(i(he),2),ze=r(i(me),2);{var Se=e=>{var t=ca();l(e,t)},Ae=e=>{var t=da();l(e,t)};b(ze,e=>{a(o),M(()=>a(o).isAuthenticated)?e(Se):e(Ae,!1)})}s(me),s(he),s(_e),ye(2),s(ge),s(ce);var pe=r(ce,2);{var Be=e=>{var t=ua(),c=i(t),_=i(c);Pe(_,{size:"large"}),ye(2),s(c),s(t),l(e,t)};b(pe,e=>{a(y),a(o),M(()=>a(y).loading||a(o).loading)&&e(Be)})}var be=r(pe,2);Oe(be,5,()=>(a(y),M(()=>a(y).notifications)),e=>e.id,(e,t)=>{ia(e,{get message(){return a(t),M(()=>a(t).message)},get type(){return a(t),M(()=>a(t).type)},duration:0,$$events:{close:()=>re(a(t).id)}})}),s(be),s(H),E((e,t,c,_)=>{X=h(K,1,"nav-link svelte-ikcr39",null,X,e),Ve(f,"aria-expanded",a(n)),Z=h(Y,1,"hamburger-line svelte-ikcr39",null,Z,t),L=h($,1,"hamburger-line svelte-ikcr39",null,L,c),ee=h(F,1,"hamburger-line svelte-ikcr39",null,ee,_)},[()=>({active:u("/")}),()=>({open:a(n)}),()=>({open:a(n)}),()=>({open:a(n)})]),S("click",f,U),l(g,H),Me(),k()}export{za as component};
