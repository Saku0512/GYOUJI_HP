import"../chunks/DsnmJJEf.js";import"../chunks/DgMYUmlK.js";import{h as S,T as q,V as C,W as P,X as V,Y as j,Z as D,n as H,_ as J,g as u,$ as K,M as R,J as L,t as n,K as T,N as U,O as _,P as i,Q as v,a0 as g,L as W,a1 as m,S as Y}from"../chunks/SJRvxFS1.js";import{s as B}from"../chunks/CVVBCw2J.js";import{i as G}from"../chunks/Dv_ePxNb.js";import{e as Q}from"../chunks/CEKcJX13.js";import{p as X}from"../chunks/CdEA5IGF.js";import{i as Z}from"../chunks/BZyghtsR.js";import{g as $}from"../chunks/Cr-ZIwDU.js";const z=Symbol("is custom element"),F=Symbol("is html");function A(e){if(S){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var o=e.value;E(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var s=e.checked;E(e,"checked",null),e.checked=s}}};e.__on_r=r,q(r),C()}}function E(e,a,r,o){var s=ee(e);S&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="loading"&&(e[P]=r),e.removeAttribute(a))}function ee(e){return e.__attributes??={[z]:e.nodeName.includes("-"),[F]:e.namespaceURI===V}}function N(e,a,r=a){var o=new WeakSet;j(e,"input",async s=>{var t=s?e.defaultValue:e.value;if(t=y(e)?k(t):t,r(t),u!==null&&o.add(u),await D(),t!==(t=a())){var d=e.selectionStart,f=e.selectionEnd;e.value=t??"",f!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(f,e.value.length))}}),(S&&e.defaultValue!==e.value||H(a)==null&&e.value)&&(r(y(e)?k(e.value):e.value),u!==null&&o.add(u)),J(()=>{var s=a();if(e===document.activeElement){var t=K??u;if(o.has(t))return}y(e)&&s===k(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function y(e){var a=e.type;return a==="number"||a==="range"}function k(e){return e===""?null:+e}var ae=L('<p class="error-message svelte-4lnbfd"> </p>'),se=L('<div class="login-container svelte-4lnbfd"><div class="login-card svelte-4lnbfd"><h2 class="svelte-4lnbfd">ログイン</h2> <form><div class="input-group svelte-4lnbfd"><label for="username" class="svelte-4lnbfd">ユーザー名</label> <input type="text" id="username" required class="svelte-4lnbfd"/></div> <div class="input-group svelte-4lnbfd"><label for="password" class="svelte-4lnbfd">パスワード</label> <input type="password" id="password" required class="svelte-4lnbfd"/></div> <!> <button type="submit" class="svelte-4lnbfd">ログイン</button></form></div></div>');function ce(e,a){R(a,!1);let r=g(""),o=g(""),s=g("");async function t(){try{const l=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n(r),password:n(o)})});if(l.ok){const c=await l.json();localStorage.setItem("token",c.token),$("/dashboard")}else m(s,"ログインに失敗しました。")}catch{m(s,"エラーが発生しました。")}}Z();var d=se(),f=i(d),b=_(i(f),2),h=i(b),w=_(i(h),2);A(w),v(h);var p=_(h,2),M=_(i(p),2);A(M),v(p);var I=_(p,2);{var O=l=>{var c=ae(),x=i(c,!0);v(c),Y(()=>B(x,n(s))),T(l,c)};G(I,l=>{n(s)&&l(O)})}W(2),v(b),v(f),v(d),N(w,()=>n(r),l=>m(r,l)),N(M,()=>n(o),l=>m(o,l)),Q("submit",b,X(t)),T(e,d),U()}export{ce as component};
