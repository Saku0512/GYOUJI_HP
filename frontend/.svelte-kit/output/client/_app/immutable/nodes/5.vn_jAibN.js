import"../chunks/Cm9PB-7n.js";import"../chunks/BB0NFQV6.js";import{p as e,o as s,i as t,f as i,h as a,a as l,t as n,b as v,c as o,d as c,$ as p,g as r,m,s as d,j as f,k as h,l as u,r as w,n as g,q as L,u as k,v as C}from"../chunks/BRFgxvOq.js";import{g as b}from"../chunks/BOLYuTPu.js";var E=i('<meta name="description" content="現在オフラインです。ネットワーク接続を確認してください。" class="svelte-itep6m"/>'),j=i('<p class="retry-info svelte-itep6m"> <!></p>'),y=i('<div class="offline-container svelte-itep6m"><div class="offline-content svelte-itep6m"><div class="offline-icon svelte-itep6m"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-itep6m"><path d="M23.64 7C23.89 7.24 24 7.62 24 8V16C24 16.38 23.89 16.76 23.64 17L17 10.5L23.64 7Z" fill="#666" class="svelte-itep6m"></path><path d="M1.27 4.27L19.73 22.73C20.12 23.12 20.76 23.12 21.15 22.73C21.54 22.34 21.54 21.7 21.15 21.31L2.69 2.85C2.3 2.46 1.66 2.46 1.27 2.85C0.88 3.24 0.88 3.88 1.27 4.27Z" fill="#f44336" class="svelte-itep6m"></path><path d="M.36 7C.11 7.24 0 7.62 0 8V16C0 17.1.9 18 2 18H22C22.05 18 22.1 18 22.14 17.99L18 13.85V16H6V10.14L.36 7Z" fill="#666" class="svelte-itep6m"></path></svg></div> <h1 class="svelte-itep6m">オフラインです</h1> <p class="offline-message svelte-itep6m">現在インターネット接続がありません。<br class="svelte-itep6m"/> ネットワーク接続を確認してから再度お試しください。</p> <div><div class="status-indicator svelte-itep6m"></div> <span class="svelte-itep6m"> </span></div> <div class="retry-section svelte-itep6m"><button class="retry-button svelte-itep6m"><!></button> <!></div> <div class="offline-features svelte-itep6m"><h3 class="svelte-itep6m">オフライン時でも利用可能な機能</h3> <ul class="svelte-itep6m"><li class="svelte-itep6m">キャッシュされたトーナメント情報の閲覧</li> <li class="svelte-itep6m">過去に表示したページの閲覧</li> <li class="svelte-itep6m">アプリケーションの基本機能</li></ul> <p class="note svelte-itep6m">※ 最新の情報を取得するには、インターネット接続が必要です。</p></div> <div class="navigation svelte-itep6m"><a href="/" class="home-link svelte-itep6m">ホームページに戻る</a></div></div></div>');function V(i,V){e(V,!1);let x=m(!0),H=m(0);function M(){L(x,navigator.onLine),r(x)&&r(H)<3&&setTimeout(()=>{b("/")},1e3)}s(()=>(window.addEventListener("online",M),window.addEventListener("offline",M),M(),()=>{window.removeEventListener("online",M),window.removeEventListener("offline",M)})),t();var Z=y();a(e=>{var s=E();p.title="オフライン - トーナメント管理システム",o(e,s)});var $=h(Z),T=u(h($),6);let q;var A=u(h(T),2),B=h(A,!0);w(A),w(T);var D=u(T,2),N=h(D),z=h(N),F=e=>{var s=C("しばらくお待ちください...");o(e,s)},G=e=>{var s=C();n(()=>f(s,`再接続を試行 (${r(H)??""}/3)`)),o(e,s)};l(z,e=>{r(H)>=3?e(F):e(G,!1)}),w(N);var I=u(N,2),J=e=>{var s=j(),t=h(s),i=u(t),a=e=>{var s=C("30秒後に再度お試しいただけます。");o(e,s)};l(i,e=>{r(H)>=3&&e(a)}),w(s),n(()=>f(t,`${r(H)??""}回試行しました。 `)),o(e,s)};l(I,e=>{r(H)>0&&e(J)}),w(D),g(4),w($),w(Z),n(e=>{q=d(T,1,"connection-status svelte-itep6m",null,q,e),f(B,r(x)?"オンライン":"オフライン"),N.disabled=r(H)>=3},[()=>({online:r(x),offline:!r(x)})]),v("click",N,async function(){k(H);try{if(!(await fetch("/api/health",{method:"HEAD",cache:"no-cache"})).ok)throw new Error("Network test failed");L(x,!0),b("/")}catch(e){r(H)>=3&&setTimeout(()=>{L(H,0)},3e4)}}),o(i,Z),c()}export{V as component};
