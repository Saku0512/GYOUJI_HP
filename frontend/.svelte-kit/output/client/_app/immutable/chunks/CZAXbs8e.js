import"./Cm9PB-7n.js";import"./BB0NFQV6.js";import{p as e,x as r,z as t,B as a,A as s,i as o,H as n,I as i,a as l,c,d,q as m,m as v,f as u,k as p,l as f,U as h,r as y,t as w,K as g,s as b,V as M,g as z,b as S,y as E,o as $,W as D,P as C,C as I,n as T,v as H,j as L,X as k}from"./BRFgxvOq.js";import{E as q,g as j,u as P}from"./DiqqC9HZ.js";import{L as A}from"./B3wANwLS.js";const B=new class{constructor(){this.metrics=new Map,this.observers=[]}async measureTime(e,r){const t=performance.now();try{const a=await r(),s=performance.now()-t;return this.recordMetric(e,{type:"timing",duration:s,timestamp:Date.now()}),a}catch(a){const r=performance.now()-t;throw this.recordMetric(e,{type:"timing",duration:r,timestamp:Date.now(),error:a.message}),a}}recordMetric(e,r){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(r)}getBundleInfo(){if("undefined"==typeof window)return null;const e=Array.from(document.querySelectorAll("script[src]")),r=Array.from(document.querySelectorAll('link[rel="stylesheet"]'));return{scripts:e.map(e=>({src:e.src,async:e.async,defer:e.defer})),styles:r.map(e=>({href:e.href})),totalScripts:e.length,totalStyles:r.length}}measureWebVitals(){if("undefined"!=typeof window){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{const r=e.getEntries(),t=r[r.length-1];this.recordMetric("LCP",{type:"web-vital",value:t.startTime,timestamp:Date.now()})});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e);const r=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("FID",{type:"web-vital",value:e.processingStart-e.startTime,timestamp:Date.now()})})});r.observe({entryTypes:["first-input"]}),this.observers.push(r);let t=0;const a=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)}),this.recordMetric("CLS",{type:"web-vital",value:t,timestamp:Date.now()})});a.observe({entryTypes:["layout-shift"]}),this.observers.push(a)}if(window.performance&&window.performance.timing){const e=window.performance.timing,r=e.navigationStart;this.recordMetric("page-load",{type:"navigation",domContentLoaded:e.domContentLoadedEventEnd-r,loadComplete:e.loadEventEnd-r,firstPaint:e.responseStart-r,timestamp:Date.now()})}}}measureMemoryUsage(){if("undefined"==typeof window||!window.performance||!window.performance.memory)return null;const e=window.performance.memory,r={usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,timestamp:Date.now()};return this.recordMetric("memory-usage",{type:"memory",...r}),r}getAllMetrics(){const e={};for(const[r,t]of this.metrics)e[r]=t;return e}clearMetrics(){this.metrics.clear()}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}};const x=new class{constructor(){this.loadedModules=new Set}async loadModule(e,r){if(!this.loadedModules.has(r))return B.measureTime(`lazy-load-${r}`,async()=>{const t=await e();return this.loadedModules.add(r),t})}loadImage(e,r){return new Promise((t,a)=>{const s=performance.now();e.onload=()=>{const e=performance.now()-s;B.recordMetric("image-load",{type:"asset",src:r,loadTime:e,timestamp:Date.now()}),t()},e.onerror=()=>{const e=performance.now()-s;B.recordMetric("image-load-error",{type:"asset",src:r,loadTime:e,timestamp:Date.now()}),a(new Error(`Failed to load image: ${r}`))},e.src=r})}};var R=u('<span class="btn-spinner svelte-qfafqz" aria-hidden="true"></span>'),O=u('<a role="button"><!> <!></a>'),J=u('<span class="btn-spinner svelte-qfafqz" aria-hidden="true"></span>'),V=u("<button><!> <!></button>");function N(u,E){e(E,!1);const $=v();let D=r(E,"variant",8,"primary"),C=r(E,"size",8,"medium"),I=r(E,"disabled",8,!1),T=r(E,"loading",8,!1),H=r(E,"type",8,"button"),L=r(E,"href",8,null),k=r(E,"target",8,null),q=r(E,"fullWidth",8,!1),j=r(E,"outline",8,!1);function P(e){(I()||T())&&e.preventDefault()}function A(e){I()||T()||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.currentTarget.click())}t(()=>(a(D()),a(C()),a(j()),a(q()),a(I()),a(T())),()=>{m($,["btn",`btn-${D()}`,`btn-${C()}`,j()?"btn-outline":"",q()?"btn-full-width":"",I()?"btn-disabled":"",T()?"btn-loading":""].filter(Boolean).join(" "))}),s(),o();var B=n(),x=i(B),N=e=>{var r=O();let t;var a=p(r),s=e=>{var r=R();c(e,r)};l(a,e=>{T()&&e(s)});var o=f(a,2);h(o,E,"default",{}),y(r),w(e=>{g(r,"href",L()),g(r,"target",k()),t=b(r,1,M(z($)),"svelte-qfafqz",t,e),g(r,"tabindex",I()?-1:0),g(r,"aria-disabled",I())},[()=>({disabled:I()})]),S("click",r,P),S("keydown",r,A),c(e,r)},U=e=>{var r=V(),t=p(r),a=e=>{var r=J();c(e,r)};l(t,e=>{T()&&e(a)});var s=f(t,2);h(s,E,"default",{}),y(r),w(()=>{g(r,"type",H()),r.disabled=I(),b(r,1,M(z($)),"svelte-qfafqz"),g(r,"aria-disabled",I())}),S("click",r,P),c(e,r)};l(x,e=>{L()?e(N):e(U,!1)}),c(u,B),d()}var U=k('<svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor" class="error-icon-critical svelte-a46ht2"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),W=k('<svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor" class="error-icon-high svelte-a46ht2"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),F=k('<svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor" class="error-icon-medium svelte-a46ht2"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>'),G=u('<p><strong>詳細:</strong></p> <pre class="error-details-json svelte-a46ht2"> </pre>',1),K=u('<details class="error-details svelte-a46ht2"><summary class="error-details-summary svelte-a46ht2">詳細情報</summary> <div class="error-details-content svelte-a46ht2"><p><strong>エラータイプ:</strong> </p> <p><strong>発生時刻:</strong> </p> <!></div></details>'),X=u("<!> 再試行中...",1),Q=u('<div role="alert" aria-live="assertive"><div class="error-content svelte-a46ht2"><div class="error-icon svelte-a46ht2"><!></div> <h2 class="error-title svelte-a46ht2"> </h2> <p class="error-message svelte-a46ht2"> </p> <!> <div class="error-actions svelte-a46ht2"><!> <!></div></div></div>');function Y(u,g){e(g,!1);const M=v(),S=v(),k=v();let B=r(g,"fallback",8,null),x=r(g,"showRetry",8,!0),R=r(g,"retryText",8,"再試行"),O=r(g,"errorTitle",8,"エラーが発生しました"),J=r(g,"errorMessage",8,""),V=r(g,"level",24,()=>q.MEDIUM),Y=r(g,"onError",8,null),Z=r(g,"onRetry",8,null),_=r(g,"resetOnPropsChange",8,!0);const ee=E();let re=v(!1),te=v(null),ae=v(!1),se=v(null),oe=null;function ne(){m(re,!1),m(te,null),m(ae,!1),m(se,null),z(se)&&j.resetErrorBoundary(z(se)),ee("reset")}async function ie(){if(!z(ae)){m(ae,!0);try{Z()&&await Z()(z(te)),ne(),P.showNotification("再試行が成功しました","success"),ee("retry-success")}catch(e){P.showNotification("再試行に失敗しました","error"),ee("retry-failed",{error:e})}finally{m(ae,!1)}}}$(()=>{oe=e=>{!function(e){if(z(re))return;if(m(te,e),m(re,!0),m(se,`error-boundary-${Date.now()}`),Y())try{Y()(z(te))}catch(r){}ee("error",{error:z(te),errorId:z(se)})}(e)},j.addErrorListener(oe)}),D(()=>{oe&&j.removeErrorListener(oe)}),t(()=>(a(_()),z(re)),()=>{_()&&z(re)&&ne()}),t(()=>a(V()),()=>{m(M,`error-level-${V()}`)}),t(()=>(a(J()),z(te)),()=>{m(S,J()||z(te)?.message||"エラーが発生しました")}),t(()=>(z(te),q),()=>{m(k,z(te)&&(z(te).level===q.HIGH||z(te).level===q.CRITICAL))}),s(),o();var le=n(),ce=i(le),de=e=>{var r=n(),t=i(r),s=e=>{var r=n(),t=i(r);C(t,B,(e,r)=>{r(e,{get error(){return z(te)},get errorId(){return z(se)},onRetry:ie,onReset:ne,get retrying(){return z(ae)}})}),c(e,r)},o=e=>{var r=Q(),t=p(r),s=p(t),o=p(s),d=e=>{var r=U();c(e,r)},m=e=>{var r=n(),t=i(r),s=e=>{var r=W();c(e,r)},o=e=>{var r=F();c(e,r)};l(t,e=>{a(V()),a(q),I(()=>V()===q.HIGH)?e(s):e(o,!1)},!0),c(e,r)};l(o,e=>{a(V()),a(q),I(()=>V()===q.CRITICAL)?e(d):e(m,!1)}),y(s);var v=f(s,2),u=p(v,!0);y(v);var h=f(v,2),g=p(h,!0);y(h);var E=f(h,2),$=e=>{var r=K(),t=f(p(r),2),a=p(t),s=f(p(a));y(a);var o=f(a,2),n=f(p(o));y(o);var d=f(o,2),m=e=>{var r=G(),t=f(i(r),2),a=p(t,!0);y(t),w(e=>L(a,e),[()=>(z(te),I(()=>JSON.stringify(z(te).details,null,2)))]),c(e,r)};l(d,e=>{z(te),I(()=>z(te).details)&&e(m)}),y(t),y(r),w(e=>{L(s,` ${z(te),I(()=>z(te).type)??""}`),L(n,` ${e??""}`)},[()=>(z(te),I(()=>new Date(z(te).timestamp).toLocaleString()))]),c(e,r)};l(E,e=>{z(k)&&e($)});var D=f(E,2),C=p(D),j=e=>{N(e,{variant:"primary",size:"medium",get disabled(){return z(ae)},class:"retry-button",$$events:{click:ie},children:(e,r)=>{var t=n(),a=i(t),s=e=>{var r=X(),t=i(r);A(t,{size:"small"}),T(),c(e,r)},o=e=>{var r=H();w(()=>L(r,R())),c(e,r)};l(a,e=>{z(ae)?e(s):e(o,!1)}),c(e,t)},$$slots:{default:!0}})};l(C,e=>{x()&&e(j)}),N(f(C,2),{variant:"secondary",size:"medium",class:"reset-button",$$events:{click:ne},children:(e,r)=>{T();var t=H("閉じる");c(e,t)},$$slots:{default:!0}}),y(D),y(t),y(r),w(()=>{b(r,1,`error-boundary ${z(M)??""}`,"svelte-a46ht2"),L(u,O()),L(g,z(S))}),c(e,r)};l(t,e=>{B()?e(s):e(o,!1)}),c(e,r)},me=e=>{var r=n(),t=i(r);h(t,g,"default",{}),c(e,r)};l(ce,e=>{z(re)?e(de):e(me,!1)}),c(u,le),d()}export{N as B,Y as E,x as l,B as p};
