import"./Cm9PB-7n.js";import{i as e}from"./B-6MdqlE.js";import{z as r,al as t,w as a,am as s,R as o,B as n,D as i,F as l,K as c,O as d,A as m,G as v,I as u,H as p,C as f,v as h,N as y,ak as w,L as g,at as b,u as M,Q as z,T as S,J as E,au as $}from"./VVabkdHj.js";import{p as D,i as T}from"./BSkGyvYi.js";import{s as C,L as I}from"./BH2mRkq2.js";import{c as H}from"./4-skfxEB.js";import{a as L,s as j,c as k,E as q,g as A,u as B}from"./JJD-QFX9.js";const P=new class{constructor(){this.metrics=new Map,this.observers=[]}async measureTime(e,r){const t=performance.now();try{const a=await r(),s=performance.now()-t;return this.recordMetric(e,{type:"timing",duration:s,timestamp:Date.now()}),a}catch(a){const r=performance.now()-t;throw this.recordMetric(e,{type:"timing",duration:r,timestamp:Date.now(),error:a.message}),a}}recordMetric(e,r){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(r)}getBundleInfo(){if("undefined"==typeof window)return null;const e=Array.from(document.querySelectorAll("script[src]")),r=Array.from(document.querySelectorAll('link[rel="stylesheet"]'));return{scripts:e.map(e=>({src:e.src,async:e.async,defer:e.defer})),styles:r.map(e=>({href:e.href})),totalScripts:e.length,totalStyles:r.length}}measureWebVitals(){if("undefined"!=typeof window){if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{const r=e.getEntries(),t=r[r.length-1];this.recordMetric("LCP",{type:"web-vital",value:t.startTime,timestamp:Date.now()})});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e);const r=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("FID",{type:"web-vital",value:e.processingStart-e.startTime,timestamp:Date.now()})})});r.observe({entryTypes:["first-input"]}),this.observers.push(r);let t=0;const a=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)}),this.recordMetric("CLS",{type:"web-vital",value:t,timestamp:Date.now()})});a.observe({entryTypes:["layout-shift"]}),this.observers.push(a)}if(window.performance&&window.performance.timing){const e=window.performance.timing,r=e.navigationStart;this.recordMetric("page-load",{type:"navigation",domContentLoaded:e.domContentLoadedEventEnd-r,loadComplete:e.loadEventEnd-r,firstPaint:e.responseStart-r,timestamp:Date.now()})}}}measureMemoryUsage(){if("undefined"==typeof window||!window.performance||!window.performance.memory)return null;const e=window.performance.memory,r={usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,timestamp:Date.now()};return this.recordMetric("memory-usage",{type:"memory",...r}),r}getAllMetrics(){const e={};for(const[r,t]of this.metrics)e[r]=t;return e}clearMetrics(){this.metrics.clear()}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}};const R=new class{constructor(){this.loadedModules=new Set}async loadModule(e,r){if(!this.loadedModules.has(r))return P.measureTime(`lazy-load-${r}`,async()=>{const t=await e();return this.loadedModules.add(r),t})}loadImage(e,r){return new Promise((t,a)=>{const s=performance.now();e.onload=()=>{const e=performance.now()-s;P.recordMetric("image-load",{type:"asset",src:r,loadTime:e,timestamp:Date.now()}),t()},e.onerror=()=>{const e=performance.now()-s;P.recordMetric("image-load-error",{type:"asset",src:r,loadTime:e,timestamp:Date.now()}),a(new Error(`Failed to load image: ${r}`))},e.src=r})}};var O=m('<span class="btn-spinner svelte-qfafqz" aria-hidden="true"></span>'),x=m('<a role="button"><!> <!></a>'),J=m('<span class="btn-spinner svelte-qfafqz" aria-hidden="true"></span>'),N=m("<button><!> <!></button>");function F(m,w){r(w,!1);const g=d();let b=D(w,"variant",8,"primary"),M=D(w,"size",8,"medium"),z=D(w,"disabled",8,!1),S=D(w,"loading",8,!1),E=D(w,"type",8,"button"),$=D(w,"href",8,null),I=D(w,"target",8,null),H=D(w,"fullWidth",8,!1),q=D(w,"outline",8,!1);function A(e){(z()||S())&&e.preventDefault()}function B(e){z()||S()||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.currentTarget.click())}t(()=>(a(b()),a(M()),a(q()),a(H()),a(z()),a(S())),()=>{c(g,["btn",`btn-${b()}`,`btn-${M()}`,q()?"btn-outline":"",H()?"btn-full-width":"",z()?"btn-disabled":"",S()?"btn-loading":""].filter(Boolean).join(" "))}),s(),e();var P=o(),R=n(P),F=e=>{var r=x();let t;var a=v(r),s=e=>{var r=O();i(e,r)};T(a,e=>{S()&&e(s)});var o=u(a,2);C(o,w,"default",{}),p(r),f(e=>{L(r,"href",$()),L(r,"target",I()),t=j(r,1,k(h(g)),"svelte-qfafqz",t,e),L(r,"tabindex",z()?-1:0),L(r,"aria-disabled",z())},[()=>({disabled:z()})]),y("click",r,A),y("keydown",r,B),i(e,r)},G=e=>{var r=N(),t=v(r),a=e=>{var r=J();i(e,r)};T(t,e=>{S()&&e(a)});var s=u(t,2);C(s,w,"default",{}),p(r),f(()=>{L(r,"type",E()),r.disabled=z(),j(r,1,k(h(g)),"svelte-qfafqz"),L(r,"aria-disabled",z())}),y("click",r,A),i(e,r)};T(R,e=>{$()?e(F):e(G,!1)}),i(m,P),l()}var G=$('<svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor" class="error-icon-critical svelte-a46ht2"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),V=$('<svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor" class="error-icon-high svelte-a46ht2"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),U=$('<svg width="48" height="48" viewBox="0 0 20 20" fill="currentColor" class="error-icon-medium svelte-a46ht2"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>'),W=m('<p><strong>詳細:</strong></p> <pre class="error-details-json svelte-a46ht2"> </pre>',1),K=m('<details class="error-details svelte-a46ht2"><summary class="error-details-summary svelte-a46ht2">詳細情報</summary> <div class="error-details-content svelte-a46ht2"><p><strong>エラータイプ:</strong> </p> <p><strong>発生時刻:</strong> </p> <!></div></details>'),Q=m("<!> 再試行中...",1),X=m('<div role="alert" aria-live="assertive"><div class="error-content svelte-a46ht2"><div class="error-icon svelte-a46ht2"><!></div> <h2 class="error-title svelte-a46ht2"> </h2> <p class="error-message svelte-a46ht2"> </p> <!> <div class="error-actions svelte-a46ht2"><!> <!></div></div></div>');function Y(m,y){r(y,!1);const $=d(),L=d(),k=d();let P=D(y,"fallback",8,null),R=D(y,"showRetry",8,!0),O=D(y,"retryText",8,"再試行"),x=D(y,"errorTitle",8,"エラーが発生しました"),J=D(y,"errorMessage",8,""),N=D(y,"level",24,()=>q.MEDIUM),Y=D(y,"onError",8,null),Z=D(y,"onRetry",8,null),_=D(y,"resetOnPropsChange",8,!0);const ee=w();let re=d(!1),te=d(null),ae=d(!1),se=d(null),oe=null;function ne(){c(re,!1),c(te,null),c(ae,!1),c(se,null),h(se)&&A.resetErrorBoundary(h(se)),ee("reset")}async function ie(){if(!h(ae)){c(ae,!0);try{Z()&&await Z()(h(te)),ne(),B.showNotification("再試行が成功しました","success"),ee("retry-success")}catch(e){B.showNotification("再試行に失敗しました","error"),ee("retry-failed",{error:e})}finally{c(ae,!1)}}}g(()=>{oe=e=>{!function(e){if(h(re))return;if(c(te,e),c(re,!0),c(se,`error-boundary-${Date.now()}`),Y())try{Y()(h(te))}catch(r){}ee("error",{error:h(te),errorId:h(se)})}(e)},A.addErrorListener(oe)}),b(()=>{oe&&A.removeErrorListener(oe)}),t(()=>(a(_()),h(re)),()=>{_()&&h(re)&&ne()}),t(()=>a(N()),()=>{c($,`error-level-${N()}`)}),t(()=>(a(J()),h(te)),()=>{c(L,J()||h(te)?.message||"エラーが発生しました")}),t(()=>(h(te),q),()=>{c(k,h(te)&&(h(te).level===q.HIGH||h(te).level===q.CRITICAL))}),s(),e();var le=o(),ce=n(le),de=e=>{var r=o(),t=n(r),s=e=>{var r=o(),t=n(r);H(t,P,(e,r)=>{r(e,{get error(){return h(te)},get errorId(){return h(se)},onRetry:ie,onReset:ne,get retrying(){return h(ae)}})}),i(e,r)},l=e=>{var r=X(),t=v(r),s=v(t),l=v(s),c=e=>{var r=G();i(e,r)},d=e=>{var r=o(),t=n(r),s=e=>{var r=V();i(e,r)},l=e=>{var r=U();i(e,r)};T(t,e=>{a(N()),a(q),M(()=>N()===q.HIGH)?e(s):e(l,!1)},!0),i(e,r)};T(l,e=>{a(N()),a(q),M(()=>N()===q.CRITICAL)?e(c):e(d,!1)}),p(s);var m=u(s,2),y=v(m,!0);p(m);var w=u(m,2),g=v(w,!0);p(w);var b=u(w,2),D=e=>{var r=K(),t=u(v(r),2),a=v(t),s=u(v(a));p(a);var o=u(a,2),l=u(v(o));p(o);var c=u(o,2),d=e=>{var r=W(),t=u(n(r),2),a=v(t,!0);p(t),f(e=>E(a,e),[()=>(h(te),M(()=>JSON.stringify(h(te).details,null,2)))]),i(e,r)};T(c,e=>{h(te),M(()=>h(te).details)&&e(d)}),p(t),p(r),f(e=>{E(s,` ${h(te),M(()=>h(te).type)??""}`),E(l,` ${e??""}`)},[()=>(h(te),M(()=>new Date(h(te).timestamp).toLocaleString()))]),i(e,r)};T(b,e=>{h(k)&&e(D)});var C=u(b,2),H=v(C),A=e=>{F(e,{variant:"primary",size:"medium",get disabled(){return h(ae)},class:"retry-button",$$events:{click:ie},children:(e,r)=>{var t=o(),a=n(t),s=e=>{var r=Q(),t=n(r);I(t,{size:"small"}),z(),i(e,r)},l=e=>{var r=S();f(()=>E(r,O())),i(e,r)};T(a,e=>{h(ae)?e(s):e(l,!1)}),i(e,t)},$$slots:{default:!0}})};T(H,e=>{R()&&e(A)}),F(u(H,2),{variant:"secondary",size:"medium",class:"reset-button",$$events:{click:ne},children:(e,r)=>{z();var t=S("閉じる");i(e,t)},$$slots:{default:!0}}),p(C),p(t),p(r),f(()=>{j(r,1,`error-boundary ${h($)??""}`,"svelte-a46ht2"),E(y,x()),E(g,h(L))}),i(e,r)};T(t,e=>{P()?e(s):e(l,!1)}),i(e,r)},me=e=>{var r=o(),t=n(r);C(t,y,"default",{}),i(e,r)};T(ce,e=>{h(re)?e(de):e(me,!1)}),i(m,le),l()}export{F as B,Y as E,R as l,P as p};
