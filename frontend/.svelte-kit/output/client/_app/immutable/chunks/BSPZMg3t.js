import{F as V,x as ae,C as q,y,aj as ne,z as ie,g as z,X as oe,A as le,H as fe,B as $,D as k,M as L,ak as ue,ao as ce,G as D,J as de,I as he,aL as ve,Q as pe,aM as j,as as W,ag as _e,aN as ge,K as X,L as me,aO as ye,aP as Te,aQ as x,aR as F,am as Ee,aS as Re,ar as Ie,aT as we,_ as Ae,aU as Ne,aV as Se,aW as be,aX as Oe,aY as Ce,aZ as Me,k as Le,s as qe,v as ke,t as xe,m as He}from"./DZk1ynsy.js";import{w as De}from"./CAxiFA8R.js";import"./DsnmJJEf.js";import"./CemgtdTq.js";import{p as B}from"./uc740CFE.js";function st(r,e){return e}function Pe(r,e,t){for(var s=r.items,a=[],n=e.length,i=0;i<n;i++)Re(e[i].e,a,!0);var f=n>0&&a.length===0&&t!==null;if(f){var _=t.parentNode;Ie(_),_.append(t),s.clear(),I(r,e[0].prev,e[n-1].next)}we(a,()=>{for(var h=0;h<n;h++){var m=e[h];f||(s.delete(m.k),I(r,m.prev,m.next)),F(m.e,!f)}})}function at(r,e,t,s,a,n=null){var i=r,f={flags:e,items:new Map,first:null};{var _=r;i=y?q(ne(_)):_.appendChild(V())}y&&ie();var h=null,m=!1,N=new Map,o=oe(()=>{var c=t();return _e(c)?c:c==null?[]:W(c)}),p,l;function u(){Ue(l,p,f,N,i,a,e,s,t),n!==null&&(p.length===0?h?X(h):h=D(()=>n(i)):h!==null&&me(h,()=>{h=null}))}ae(()=>{l??=Ae,p=z(o);var c=p.length;if(m&&c===0)return;m=c===0;let A=!1;if(y){var E=le(i)===fe;E!==(c===0)&&(i=$(),q(i),k(!1),A=!0)}if(y){for(var d=null,g,v=0;v<c;v++){if(L.nodeType===ue&&L.data===ce){i=L,A=!0,k(!1);break}var w=p[v],R=s(w,v);g=P(L,f,d,null,w,R,v,a,e,t),f.items.set(R,g),d=g}c>0&&q($())}if(y)c===0&&n&&(h=D(()=>n(i)));else if(de()){var S=new Set,T=he;for(v=0;v<c;v+=1){w=p[v],R=s(w,v);var O=f.items.get(R)??N.get(R);O?Q(O,w,v):(g=P(null,f,null,null,w,R,v,a,e,t,!0),N.set(R,g)),S.add(R)}for(const[C,M]of f.items)S.has(C)||T.skipped_effects.add(M.e);T.add_callback(u)}else u();A&&k(!0),z(o)}),y&&(i=L)}function Ue(r,e,t,s,a,n,i,f,_){var h=e.length,m=t.items,N=t.first,o=N,p,l=null,u=[],c=[],A,E,d,g;for(g=0;g<h;g+=1){if(A=e[g],E=f(A,g),d=m.get(E),d===void 0){var v=s.get(E);if(v!==void 0){s.delete(E),m.set(E,v);var w=l?l.next:o;I(t,l,v),I(t,v,w),H(v,w,a),l=v}else{var R=o?o.e.nodes_start:a;l=P(R,t,l,l===null?t.first:l.next,A,E,g,n,i,_)}m.set(E,l),u=[],c=[],o=l.next;continue}if(Q(d,A,g),(d.e.f&x)!==0&&X(d.e),d!==o){if(p!==void 0&&p.has(d)){if(u.length<c.length){var S=c[0],T;l=S.prev;var O=u[0],C=u[u.length-1];for(T=0;T<u.length;T+=1)H(u[T],S,a);for(T=0;T<c.length;T+=1)p.delete(c[T]);I(t,O.prev,C.next),I(t,l,O),I(t,C,S),o=S,l=C,g-=1,u=[],c=[]}else p.delete(d),H(d,o,a),I(t,d.prev,d.next),I(t,d,l===null?t.first:l.next),I(t,l,d),l=d;continue}for(u=[],c=[];o!==null&&o.k!==E;)(o.e.f&x)===0&&(p??=new Set).add(o),c.push(o),o=o.next;if(o===null)continue;d=o}u.push(d),l=d,o=d.next}if(o!==null||p!==void 0){for(var M=p===void 0?[]:W(p);o!==null;)(o.e.f&x)===0&&M.push(o),o=o.next;var te=M.length;if(te>0){var re=h===0?a:null;Pe(t,M,re)}}r.first=t.first&&t.first.e,r.last=l&&l.e;for(var se of s.values())F(se.e);s.clear()}function Q(r,e,t,s){ve(r.v,e),r.i=t}function P(r,e,t,s,a,n,i,f,_,h,m){var N=(_&ye)!==0,o=(_&Te)===0,p=N?o?pe(a,!1,!1):j(a):a,l=(_&ge)===0?i:j(i),u={i:l,v:p,k:n,a:null,e:null,prev:t,next:s};try{if(r===null){var c=document.createDocumentFragment();c.append(r=V())}return u.e=D(()=>f(r,p,l,h),y),u.e.prev=t&&t.e,u.e.next=s&&s.e,t===null?m||(e.first=u):(t.next=u,t.e.next=u.e),s!==null&&(s.prev=u,s.e.prev=u.e),u}finally{}}function H(r,e,t){for(var s=r.next?r.next.e.nodes_start:t,a=e?e.e.nodes_start:t,n=r.e.nodes_start;n!==null&&n!==s;){var i=Ee(n);a.before(n),n=i}}function I(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Z(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=Z(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function ze(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=Z(r))&&(s&&(s+=" "),s+=e);return s}function nt(r){return typeof r=="object"?ze(r):r??""}const G=[...` 	
\r\f \v\uFEFF`];function $e(r,e,t){var s=r==null?"":""+r;if(e&&(s=s?s+" "+e:e),t){for(var a in t)if(t[a])s=s?s+" "+a:a;else if(s.length)for(var n=a.length,i=0;(i=s.indexOf(a,i))>=0;){var f=i+n;(i===0||G.includes(s[i-1]))&&(f===s.length||G.includes(s[f]))?s=(i===0?"":s.substring(0,i))+s.substring(f+1):i=f}}return s===""?null:s}function je(r,e){return r==null?null:String(r)}function Be(r,e,t,s,a,n){var i=r.__className;if(y||i!==t||i===void 0){var f=$e(t,s,n);(!y||f!==r.getAttribute("class"))&&(f==null?r.removeAttribute("class"):r.className=f),r.__className=t}else if(n&&a!==n)for(var _ in n){var h=!!n[_];(a==null||h!==!!a[_])&&r.classList.toggle(_,h)}return n}function Ge(r,e,t,s){var a=r.__style;if(y||a!==e){var n=je(e);(!y||n!==r.getAttribute("style"))&&(n==null?r.removeAttribute("style"):r.style.cssText=n),r.__style=e}return s}const Je=Symbol("is custom element"),Ke=Symbol("is html");function it(r){if(y){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var s=r.value;J(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var a=r.checked;J(r,"checked",null),r.checked=a}}};r.__on_r=t,Ce(t),Me()}}function J(r,e,t,s){var a=Ye(r);y&&(a[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||a[e]!==(a[e]=t)&&(e==="loading"&&(r[Oe]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Ve(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Ye(r){return r.__attributes??={[Je]:r.nodeName.includes("-"),[Ke]:r.namespaceURI===Ne}}var K=new Map;function Ve(r){var e=r.getAttribute("is")||r.nodeName,t=K.get(e);if(t)return t;K.set(e,t=[]);for(var s,a=r,n=Element.prototype;n!==a;){s=be(a);for(var i in s)s[i].set&&t.push(i);a=Se(a)}return t}class We{constructor(e="http://localhost:8080/api"){this.baseURL=e,this.token=null,this.requestInterceptors=[],this.responseInterceptors=[]}setToken(e){this.token=e}getToken(){return this.token}addRequestInterceptor(e){this.requestInterceptors.push(e)}addResponseInterceptor(e){this.responseInterceptors.push(e)}getHeaders(e={}){const t={"Content-Type":"application/json",...e};return this.token&&(t.Authorization=`Bearer ${this.token}`),t}async applyRequestInterceptors(e){let t={...e};for(const s of this.requestInterceptors)try{t=await s(t)}catch(a){console.error("Request interceptor error:",a)}return t}async applyResponseInterceptors(e){let t=e;for(const s of this.responseInterceptors)try{t=await s(t)}catch(a){console.error("Response interceptor error:",a)}return t}async request(e,t={}){const s=`${this.baseURL}${e}`,a={method:"GET",headers:this.getHeaders(t.headers),...t},n=await this.applyRequestInterceptors(a);try{const i=await fetch(s,n),f=await this.applyResponseInterceptors(i);return await this.handleResponse(f)}catch(i){return this.handleError(i)}}async get(e,t={}){return this.request(e,{...t,method:"GET"})}async post(e,t,s={}){return this.request(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t,s={}){return this.request(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e,t={}){return this.request(e,{...t,method:"DELETE"})}async patch(e,t,s={}){return this.request(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async handleResponse(e){const t=e.headers.get("content-type");try{let s;return t&&t.includes("application/json")?s=await e.json():s=await e.text(),e.ok?{success:!0,data:s,status:e.status,statusText:e.statusText}:{success:!1,error:s.error||"HTTP_ERROR",message:s.message||`HTTP ${e.status}: ${e.statusText}`,status:e.status,statusText:e.statusText,details:s.details||null}}catch(s){return{success:!1,error:"PARSE_ERROR",message:"レスポンスの解析に失敗しました",status:e.status,statusText:e.statusText,details:s.message}}}handleError(e){return console.error("API Client Error:",e),e.name==="TypeError"&&e.message.includes("fetch")?{success:!1,error:"NETWORK_ERROR",message:"ネットワークエラーが発生しました。接続を確認してください。",details:e.message}:e.name==="AbortError"?{success:!1,error:"TIMEOUT_ERROR",message:"リクエストがタイムアウトしました。",details:e.message}:{success:!1,error:"UNKNOWN_ERROR",message:"予期しないエラーが発生しました。",details:e.message}}async healthCheck(){try{return(await this.get("/health")).success}catch{return!1}}}const U=new We;U.addRequestInterceptor(async r=>r);U.addResponseInterceptor(async r=>(r.status===401&&(U.setToken(null),typeof window<"u"&&localStorage.removeItem("auth_token"),typeof window<"u"&&window.dispatchEvent(new CustomEvent("auth:unauthorized"))),r));const ee={notifications:[],loading:!1,theme:"light"},b=De(ee);let Xe=0;const Y={showNotification:(r,e="info",t=5e3)=>{const s={id:++Xe,message:r,type:e,timestamp:Date.now()};return b.update(a=>({...a,notifications:[...a.notifications,s]})),t>0&&setTimeout(()=>{Y.removeNotification(s.id)},t),s.id},removeNotification:r=>{b.update(e=>({...e,notifications:e.notifications.filter(t=>t.id!==r)}))},setLoading:r=>{b.update(e=>({...e,loading:!!r}))},clearNotifications:()=>{b.update(r=>({...r,notifications:[]}))},setTheme:r=>{if(r!=="light"&&r!=="dark"){console.warn('Invalid theme. Only "light" and "dark" are supported.');return}b.update(e=>({...e,theme:r})),typeof localStorage<"u"&&localStorage.setItem("ui-theme",r)},loadTheme:()=>{if(typeof localStorage<"u"){const r=localStorage.getItem("ui-theme");r&&(r==="light"||r==="dark")&&Y.setTheme(r)}},reset:()=>{b.set(ee)}};var Fe=Le('<div class="spinner-container svelte-1yjjzjh"><div></div></div>');function ot(r,e){let t=B(e,"size",8,"medium"),s=B(e,"color",8,"#007bff");var a=Fe(),n=qe(a);ke(a),xe(()=>{Be(n,1,`spinner ${t()??""}`,"svelte-1yjjzjh"),Ge(n,`border-top-color: ${s()??""}`)}),He(r,a)}export{ot as L,U as a,J as b,b as c,nt as d,at as e,st as i,it as r,Be as s,Y as u};
