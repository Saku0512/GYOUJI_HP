# 実装計画

- [x] 1. フロントエンドプロジェクト構造のセットアップ




  - SvelteKitプロジェクトの初期化と必要な依存関係のインストール
  - 設計に従ったディレクトリ構造の作成（routes, lib/components, lib/stores, lib/api, lib/utils）
  - Vite設定ファイルの作成とビルド最適化の設定
  - TypeScript設定とESLint/Prettierの設定
  - _要件: 5.1, 5.4_

- [x] 2. APIクライアントとユーティリティの実装




  - [x] 2.1 HTTPクライアントの作成


    - APIClient クラスの実装（認証ヘッダー、エラーハンドリング、レスポンス処理）
    - 環境変数からのAPI基底URLの設定
    - リクエスト/レスポンスインターセプターの実装
    - _要件: 4.3, 7.1, 7.3_



  - [x] 2.2 認証APIクライアントの実装




    - AuthAPI クラスの作成（login, logout, refreshToken, validateToken メソッド）
    - JWTトークンの自動付与とリフレッシュ機能
    - 認証APIクライアントの単体テスト作成


    - _要件: 1.1, 1.2, 1.4_

  - [x] 2.3 トーナメントAPIクライアントの実装




    - TournamentAPI クラスの作成（getTournaments, getTournament, getTournamentBracket メソッド）


    - トーナメント形式切り替えAPI呼び出しの実装
    - トーナメントAPIクライアントの単体テスト作成
    - _要件: 2.2, 4.1, 6.2, 6.3_

  - [x] 2.4 試合APIクライアントの実装




    - MatchAPI クラスの作成（getMatches, getMatch, updateMatch, createMatch メソッド）
    - 試合結果更新のAPI呼び出し実装
    - 試合APIクライアントの単体テスト作成
    - _要件: 3.3, 3.4, 4.2_

- [ ] 3. 状態管理ストアの実装
  - [x] 3.1 認証ストアの作成





    - authStore の実装（isAuthenticated, token, user, loading 状態管理）
    - login, logout, checkAuthStatus, refreshToken アクション実装
    - ローカルストレージでのトークン永続化
    - 認証ストアの単体テスト作成
    - _要件: 1.1, 1.2, 1.4, 1.5, 8.4_

  - [x] 3.2 トーナメントストアの作成





    - tournamentStore の実装（tournaments, currentSport, loading, error 状態管理）
    - fetchTournaments, updateMatch, switchSport, refreshData アクション実装
    - データキャッシュとリアルタイム更新ロジック
    - トーナメントストアの単体テスト作成
    - _要件: 2.1, 2.2, 4.1, 4.2, 4.5, 8.1, 8.2_

  - [x] 3.3 UIストアの作成




    - uiStore の実装（notifications, loading, theme 状態管理）
    - showNotification, setLoading, clearNotifications アクション実装
    - 通知システムとローディング状態の管理
    - UIストアの単体テスト作成
    - _要件: 7.1, 7.2, 7.5_

- [ ] 4. 再利用可能コンポーネントの実装
  - [x] 4.1 TournamentBracket コンポーネントの作成




    - ブラケット形式でのトーナメント表示コンポーネント実装
    - レスポンシブデザインとモバイル最適化
    - 試合結果の視覚的表現と管理者向け編集リンク
    - TournamentBracket コンポーネントのテスト作成
    - _要件: 2.1, 2.2, 2.3, 5.1, 5.2, 5.3_

  - [x] 4.2 MatchCard コンポーネントの作成








    - 個別試合情報表示コンポーネントの実装
    - スコア表示、試合ステータス表示、編集モード切り替え
    - タッチフレンドリーなインターフェース
    - MatchCard コンポーネントのテスト作成
    - _要件: 2.3, 2.4, 3.2, 5.2_

  - [x] 4.3 AdminMatchForm コンポーネントの作成





    - 試合結果入力フォームコンポーネントの実装
    - リアルタイム検証とエラーハンドリング
    - 送信処理と成功/エラーフィードバック
    - AdminMatchForm コンポーネントのテスト作成
    - _要件: 3.3, 3.4, 7.1, 7.4_

  - [x] 4.4 共通UIコンポーネントの作成





    - LoadingSpinner, NotificationToast, Modal コンポーネントの実装
    - Button, Input, Select などの基本UIコンポーネント
    - アクセシビリティ対応とキーボードナビゲーション
    - 共通UIコンポーネントのテスト作成
    - _要件: 5.5, 7.5_

- [ ] 5. ページコンポーネントとルーティングの実装
  - [x] 5.1 共通レイアウトの作成




    - +layout.svelte の実装（ヘッダー、フッター、ナビゲーション）
    - 認証状態に応じたナビゲーション表示
    - 通知システムとローディングオーバーレイの統合
    - レスポンシブナビゲーションメニュー
    - _要件: 1.5, 5.1, 5.2, 5.3, 7.5_

  - [x] 5.2 ホームページの実装




    - +page.svelte の作成（トーナメント表示メインページ）
    - スポーツタブ切り替え機能の実装
    - TournamentBracket コンポーネントの統合
    - リアルタイム更新とデータ取得ロジック
    - _要件: 2.1, 2.2, 4.1, 4.2, 4.5_

  - [x] 5.3 ログインページの実装









    - login/+page.svelte の作成（管理者ログインフォーム）
    - フォーム検証とエラーハンドリング
    - 認証成功時のリダイレクト処理
    - ログイン状態の永続化
    - _要件: 1.1, 1.2, 1.3, 7.4_

  - [ ] 5.4 管理者ダッシュボードの実装
    - admin/+page.svelte の作成（管理者専用ダッシュボード）
    - 認証ガードとアクセス制御
    - 未完了試合一覧表示と試合結果入力機能
    - トーナメント形式切り替え機能
    - _要件: 3.1, 3.2, 3.3, 3.4, 6.1, 6.2, 6.3, 6.4_

- [ ] 6. 認証とセキュリティ機能の実装
  - [ ] 6.1 認証ガードの実装
    - ルートレベルでの認証チェック機能
    - 未認証ユーザーのリダイレクト処理
    - トークン期限切れ時の自動ログアウト
    - 認証ガードのテスト作成
    - _要件: 1.3, 1.4, 1.5_

  - [ ] 6.2 フォーム検証とセキュリティの実装
    - クライアントサイドフォーム検証の実装
    - 入力データのサニタイゼーション
    - XSS攻撃対策とセキュアなデータハンドリング
    - セキュリティ機能のテスト作成
    - _要件: 7.4, 8.5_

- [ ] 7. リアルタイム更新とデータ同期の実装
  - [ ] 7.1 ポーリングシステムの実装
    - 定期的なデータ更新のポーリング機能
    - ページ可視性に基づくポーリング制御
    - ネットワークエラー時の再試行ロジック
    - ポーリングシステムのテスト作成
    - _要件: 4.1, 4.2, 4.3, 4.4_

  - [ ] 7.2 データキャッシュシステムの実装
    - メモリキャッシュとブラウザキャッシュの実装
    - キャッシュ無効化とデータ整合性の管理
    - オフライン時のキャッシュデータ表示
    - キャッシュシステムのテスト作成
    - _要件: 8.1, 8.2, 8.3_

- [ ] 8. レスポンシブデザインとUI/UX の実装
  - [ ] 8.1 レスポンシブレイアウトの実装
    - CSS Grid と Flexbox を使用したレスポンシブデザイン
    - モバイル、タブレット、デスクトップ対応
    - タッチフレンドリーなインターフェース
    - レスポンシブデザインのテスト作成
    - _要件: 5.1, 5.2, 5.3, 5.4, 5.5_

  - [ ] 8.2 アニメーションとトランジションの実装
    - ページ遷移とコンポーネント切り替えアニメーション
    - ローディング状態とデータ更新の視覚的フィードバック
    - スムーズなユーザーエクスペリエンスの実装
    - アニメーション機能のテスト作成
    - _要件: 7.2, 7.5_

- [ ] 9. エラーハンドリングと通知システムの実装
  - [ ] 9.1 包括的エラーハンドリングの実装
    - グローバルエラーハンドラーとエラー境界の設定
    - API エラーの適切な処理と表示
    - ネットワークエラーと再試行機能
    - エラーハンドリングのテスト作成
    - _要件: 7.1, 7.2, 7.3_

  - [ ] 9.2 通知システムの実装
    - 成功、エラー、警告通知の表示システム
    - 自動消去とユーザー操作による通知管理
    - アクセシブルな通知デザイン
    - 通知システムのテスト作成
    - _要件: 7.2, 7.5_

- [ ] 10. テストスイートの実装
  - [ ] 10.1 単体テストの作成
    - 全コンポーネントの単体テスト実装
    - ストアとAPIクライアントのテスト
    - ユーティリティ関数のテスト
    - テストカバレッジ80%以上の達成
    - _要件: 1.1, 2.1, 3.1, 4.1, 7.1_

  - [ ] 10.2 統合テストとE2Eテストの作成
    - Playwright を使用したE2Eテストの実装
    - ユーザーフローのテストシナリオ作成
    - 認証フローと管理者機能のテスト
    - クロスブラウザテストの設定
    - _要件: 1.1, 1.2, 2.1, 3.1, 3.3_

- [ ] 11. パフォーマンス最適化の実装
  - [ ] 11.1 バンドル最適化とコード分割
    - Vite設定でのバンドル最適化
    - ルートベースのコード分割実装
    - 遅延読み込みと動的インポート
    - バンドルサイズ分析とパフォーマンステスト
    - _要件: 8.1, 8.2_

  - [ ] 11.2 画像最適化とアセット管理
    - 画像の遅延読み込みと最適化
    - 静的アセットのキャッシュ戦略
    - Service Worker によるオフライン対応
    - パフォーマンスメトリクスの監視
    - _要件: 8.1, 8.3_

- [ ] 12. Docker統合とデプロイメント準備
  - [ ] 12.1 フロントエンド用Dockerfileの作成
    - マルチステージビルドでのDockerfile作成
    - Nginx設定でのSPA対応とAPIプロキシ設定
    - 本番環境向けの最適化設定
    - Docker イメージのセキュリティ対策
    - _要件: 4.3, 7.3_

  - [ ] 12.2 docker-compose統合の更新
    - 既存のdocker-compose.ymlにフロントエンドサービス追加
    - フロントエンド、バックエンド、データベース間のネットワーク設定
    - 環境変数とシークレット管理の統合
    - 開発環境と本番環境の設定分離
    - _要件: 4.3, 8.4_

- [ ] 13. ドキュメントとデプロイメントガイドの作成
  - [ ] 13.1 開発者ドキュメントの作成
    - プロジェクト構造とアーキテクチャの説明
    - コンポーネントとAPIの使用方法
    - 開発環境のセットアップガイド
    - コーディング規約とベストプラクティス
    - _要件: 全要件_

  - [ ] 13.2 デプロイメントガイドの作成
    - 本番環境へのデプロイ手順
    - 環境変数とシークレット設定
    - 監視とログ設定
    - トラブルシューティングガイド
    - _要件: 4.3, 7.1, 8.4_